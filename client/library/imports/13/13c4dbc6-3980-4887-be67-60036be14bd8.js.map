{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame/assets\\Script\\sss\\sssgame\\sssGameResult.js"],"names":["cc","Class","extends","Component","properties","onLoad","_seats","i","s","sn","node","getChildByName","active","viewdata","username","getComponent","Label","imgLoader","ID","score","win","lose","pingju","btnWechat","find","vv","utils","addClickEvent","push","info","string","sssNetMgr","roomId","log","reset","showResult","data","len","length","name","userName","str","substring","userId","setUserID","icon","flat","sys","localStorage","setItem","onBtnWeichatClicked","share","onBtnShareCloseClicked","onBtnShareHaoyou","browserType","console","anysdkMgr","getAccess_token","os","OS_ANDROID","OS_IOS","shareResult","onBtnSharePengyouquan","btnClick","event","target","sssNet","send"],"mappings":"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","file":"sssGameResult.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._seats = [];\r\n        for(var i = 1; i <= 8; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.node.getChildByName(s);\r\n            sn.active = false;\r\n            var viewdata = {};\r\n            viewdata.username = sn.getChildByName('userName').getComponent(cc.Label);\r\n            viewdata.imgLoader = sn.getChildByName(\"headBox\").getComponent(\"ImageLoader\");\r\n            viewdata.ID = sn.getChildByName('ID').getComponent(cc.Label);\r\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\r\n            viewdata.win = sn.getChildByName('win').getComponent(cc.Label);\r\n            viewdata.lose = sn.getChildByName('lose').getComponent(cc.Label);\r\n            viewdata.pingju = sn.getChildByName('pingju').getComponent(cc.Label);\r\n\r\n            var btnWechat = cc.find(\"Canvas/game_result/btn_wxfx\");\r\n            if(btnWechat){\r\n                //if(cc.mj.userMgr.control.value == 0){\r\n                    btnWechat.active = true;\r\n                //}\r\n                cc.vv.utils.addClickEvent(btnWechat,this.node,\"sssGameResult\",\"onBtnWeichatClicked\");\r\n            }\r\n\r\n            this._seats.push(viewdata);\r\n        }\r\n        var info=this.node.getChildByName(\"info\");\r\n        info.getChildByName(\"room_id\").getComponent(cc.Label).string=\"房间号: \" + cc.sssNetMgr.roomId;\r\n        cc.log(cc.sssNetMgr.roomId);\r\n    },\r\n\r\n    reset:function(){\r\n        this.node.active = false;\r\n        for(var i = 1; i <= 6; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.node.getChildByName(s);\r\n            sn.active = false;\r\n        }\r\n    },\r\n\r\n    showResult:function(data){\r\n        var len = data.length;\r\n        for(var i = 1; i <= len; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.node.getChildByName(s);\r\n            sn.active = true;\r\n        }\r\n        for(let i = 0;i < data.length;i++){\r\n            var name = data[i].userName;\r\n            var len = name.length;\r\n            if (len > 10) {\r\n                var str = name.substring(0,10);\r\n                this._seats[i].username.string = str +'...';\r\n            }\r\n            else {\r\n                this._seats[i].username.string = name;\r\n            }\r\n            this._seats[i].ID.string = data[i].userId;\r\n            if(this._seats[i].imgLoader && data[i].userId){\r\n                this._seats[i].imgLoader.setUserID(data[i].userId, data.icon);\r\n            }\r\n            this._seats[i].score.string = data[i].score;\r\n            this._seats[i].win.string = data[i].win;\r\n            this._seats[i].lose.string = data[i].lose;\r\n            this._seats[i].pingju.string = data[i].flat;\r\n        }\r\n        //删除SSS房间信息\r\n        cc.sys.localStorage.setItem(\"SSS_wanfa\",null);\r\n        cc.sys.localStorage.setItem(\"SSS_roomId\",null);\r\n    },\r\n\r\n    onBtnWeichatClicked:function(){\r\n        //微信分享监听\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = true;\r\n    },\r\n    onBtnShareCloseClicked:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n    },\r\n    onBtnShareHaoyou:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n        \r\n\r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            cc.vv.anysdkMgr.shareResult('0');\r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n    },\r\n    onBtnSharePengyouquan:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n        \r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            cc.vv.anysdkMgr.shareResult('1');\r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n    },\r\n\r\n    btnClick:function(event){\r\n        if(event.target.name === \"btn_close\"){\r\n            this.reset();\r\n            //返回大厅\r\n            cc.sssNet.send('exit_disconnect');\r\n        }\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
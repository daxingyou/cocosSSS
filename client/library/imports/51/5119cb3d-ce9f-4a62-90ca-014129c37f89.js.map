{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame/assets\\Script\\sss\\sssgame\\gameSeats.js"],"names":["PaiType","require","cc","Class","extends","Component","properties","_daQiangLen","TDseq","ZDseq","WDseq","shootSeq","onLoad","seatComs","i","node","children","length","name","seatNode","getChildByName","active","seatCom","getComponent","push","Compare","refreshSeats","seatData","sssNetMgr","seats","userid","index","getLocalIndex","seatindex","setInfo","setReady","ready","deleteOneSeat","data","log","setNullInfo","setPlayerReady","resetReady","emptyChatBubble","_chatBubble","_emoji","resetALLSeat","indexClear","resetGameSeats","resetGameSeat","setResultData","arrSeq","compareResult","tdRes","copyTdArr","concat","arrSort","zdRes","wdRes","showCompareResult","shootResult","showShootResult","TSPResult","showTSPResult","setAllScore","target","userId","score","seatIndex","getSeatIndexByID","delayTime","callFunc","userInfo","showOver","window","sssGame","mySeq","sequence","runAction","setAllScoreResult","len","setTotalScore","allScore","holds","type","paibei","showTSP","showSpecialResult","shootInfo","key","doShootId","beShootArr","beShootId","seatIndex0","index0","seatIndex1","index1","setShoot","showShoot","shootScore","swatUserId","animation","Animation","showSwat","quanleida","play","audio","playSFX","userID","arrPai","getPaiType","paiType","getRealType","comIndex","setTD","isclickpb","showTD","setZD","showZD","setWD","showWD","arrRes","arrTar","bPush","j","result","comparePai","splice","dunIndex","ST","WT","THS","HL","TZ","arrType","myPaiCom","sortPai","getType","arrPai1","arrPai2","type1","type2","compareSameType","setPaibei","playerData","uidSeats","setScore"],"mappings":"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","file":"gameSeats.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame","sourcesContent":["var PaiType = require(\"define\").PaiType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _daQiangLen: null,\r\n        TDseq: null,\r\n        ZDseq: null,\r\n        WDseq: null,\r\n        shootSeq: null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.seatComs = [];\r\n        for (var i = 0; i < this.node.children.length; i++) {\r\n            var name = 'seat' + i;\r\n            var seatNode = this.node.getChildByName(name);\r\n            seatNode.active=true;\r\n            var seatCom = seatNode.getComponent('gameSeat');\r\n            this.seatComs.push(seatCom);\r\n        }\r\n        this.Compare = require(\"Compare\");\r\n    },\r\n\r\n    refreshSeats: function () {\r\n        var seatData = cc.sssNetMgr.seats;\r\n        // console.log(seatData)\r\n        for (var i = 0; i < seatData.length; i++) {\r\n            if (seatData[i].userid <= 0) {\r\n                continue;\r\n            }\r\n            var index = cc.sssNetMgr.getLocalIndex(seatData[i].seatindex);\r\n            this.seatComs[index].setInfo(seatData[i]);\r\n            this.seatComs[index].setReady(seatData[i].ready);\r\n        }\r\n    },\r\n    deleteOneSeat(data){\r\n        cc.log(data)\r\n        var seatData = cc.sssNetMgr.seats;\r\n        for (var i = 0; i < seatData.length; i++) {\r\n            if (seatData[i].userid == data.userid) {\r\n                \r\n                var index = cc.sssNetMgr.getLocalIndex(seatData[i].seatindex);\r\n                this.seatComs[index].setNullInfo();\r\n            }\r\n            \r\n        }\r\n    },\r\n    setPlayerReady: function (data) {\r\n        var userid = data;\r\n        var seatData = cc.sssNetMgr.seats;\r\n        for (var i = 0; i < seatData.length; i++) {\r\n            if (seatData[i].userid === userid) {\r\n                var index = cc.sssNetMgr.getLocalIndex(seatData[i].seatindex);\r\n                // this.seatComs[index].setReady(seatData[i].ready);\r\n                this.seatComs[index].setReady(seatData[i].ready);\r\n            }\r\n        }\r\n    },\r\n\r\n    resetReady: function () {\r\n        var seatData = cc.sssNetMgr.seats;\r\n        for (var i = 0; i < seatData.length; i++) {\r\n            if (seatData[i].userid <= 0) {\r\n                continue;\r\n            }\r\n            this.seatComs[i].setReady(false);\r\n        }\r\n    },\r\n\r\n    emptyChatBubble: function () {//清空聊天\r\n        var seatData = cc.sssNetMgr.seats;\r\n        for (var i = 0; i < this.seatComs.length; i++) {\r\n            this.seatComs[i]._chatBubble.active = false;\r\n            this.seatComs[i]._emoji.active = false;\r\n        }\r\n    },\r\n\r\n    resetALLSeat: function () {\r\n        var seatData = cc.sssNetMgr.seats;\r\n        for (var i = 0; i < seatData.length; i++) {\r\n            if (seatData[i].userid <= 0) {\r\n                var indexClear = cc.sssNetMgr.getLocalIndex(seatData[i].seatindex);\r\n                this.seatComs[indexClear].setInfo(seatData[i]);\r\n                this.seatComs[index].setReady(false);\r\n                continue;\r\n            }\r\n            var index = cc.sssNetMgr.getLocalIndex(seatData[i].seatindex);\r\n            this.seatComs[index].setInfo(seatData[i]);\r\n            this.seatComs[index].setReady(seatData[i].ready);\r\n        }\r\n    },\r\n\r\n    resetGameSeats: function () {\r\n        if (this.seatComs) {\r\n            for (let i = 0; i < this.seatComs.length; i++) {\r\n                this.seatComs[i].resetGameSeat();\r\n            }\r\n        }\r\n    },\r\n    \r\n    //普通玩法结果显示\r\n    setResultData: function (data) {\r\n        cc.log(data);\r\n        var arrSeq = [];\r\n        //每个人同时比牌\r\n        var compareResult = data.compareResult;\r\n        var tdRes = [];\r\n        var copyTdArr = compareResult.tdRes.concat();\r\n        if (compareResult.tdRes.length > 0) {\r\n            this.arrSort(copyTdArr, tdRes);\r\n        }\r\n        var zdRes = [];\r\n        var copyTdArr = compareResult.zdRes.concat();\r\n        if (compareResult.zdRes.length > 0) {\r\n            this.arrSort(copyTdArr, zdRes);\r\n        }\r\n        var wdRes = [];\r\n        var copyTdArr = compareResult.wdRes.concat();\r\n        if (compareResult.wdRes.length > 0) {\r\n            this.arrSort(copyTdArr, wdRes);\r\n        }\r\n        this.showCompareResult(arrSeq, tdRes, zdRes, wdRes);\r\n\r\n        //比牌结束显示打枪\r\n        var shootResult = data.shootResult;\r\n        this.showShootResult(arrSeq, shootResult);\r\n\r\n        //显示特殊牌\r\n        var TSPResult = data.TSPResult;\r\n        this.showTSPResult(arrSeq, TSPResult);\r\n\r\n        //分数显示\r\n        var setAllScore = function (target, data) {\r\n            for (let i = 0; i < data.length; i++) {\r\n                var userId = data[i].userId;\r\n                var score = data[i].score;\r\n                var seatIndex = cc.sssNetMgr.getSeatIndexByID(userId);\r\n                var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n                if (!target.getComponent('gameSeats').seatComs[index]) {\r\n                    return;\r\n                }\r\n                target.getComponent('gameSeats').seatComs[index].setAllScore(score);\r\n            }\r\n        }\r\n        arrSeq.push(cc.delayTime(0.5));\r\n        arrSeq.push(cc.callFunc(setAllScore, this.node, data.userInfo));\r\n\r\n        //显示本局结算\r\n        var showOver = function (target, data) {\r\n            window.sssGame.showOver();\r\n        }\r\n        arrSeq.push(cc.delayTime(2));\r\n        arrSeq.push(cc.callFunc(showOver, this.node, data));\r\n        var mySeq = cc.sequence(arrSeq);\r\n        this.node.runAction(mySeq);\r\n    },\r\n\r\n    setAllScoreResult: function (data) {\r\n        var len = data.length;\r\n        for (let i = 0; i < len; i++) {\r\n            var userId = data[i].userId;\r\n            var seatIndex = cc.sssNetMgr.getSeatIndexByID(userId);\r\n            var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n            if (!this.seatComs[index]) {\r\n                return;\r\n            }\r\n            this.seatComs[index].setTotalScore(data[i].allScore);\r\n        }\r\n    },\r\n\r\n    showTSPResult: function (arrSeq, TSPResult) {\r\n        if (!TSPResult || TSPResult.length < 1) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < TSPResult.length; i++) {\r\n            var holds = TSPResult[i].holds;\r\n            var userId = TSPResult[i].userId;\r\n            var type = TSPResult[i].type;\r\n\r\n            var seatIndex = cc.sssNetMgr.getSeatIndexByID(userId);\r\n            var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n\r\n            var data = {};\r\n            data.holds = holds;\r\n            data.type = type;\r\n            data.index = index;\r\n\r\n            //显示牌背\r\n            this.seatComs[index].paibei(13);\r\n\r\n            var showTSP = function (target, data) {\r\n                if (!target.getComponent('gameSeats').seatComs[data.index]) {\r\n                    return;\r\n                }\r\n                target.getComponent('gameSeats').seatComs[data.index].showSpecialResult(data.holds, data.type);\r\n            }\r\n            arrSeq.push(cc.delayTime(1));\r\n            arrSeq.push(cc.callFunc(showTSP, this.node, data));\r\n            arrSeq.push(cc.delayTime(2));\r\n        }\r\n    },\r\n    showShootResult: function (arrSeq, shootResult) {\r\n        cc.log(shootResult);\r\n        if (!shootResult.shootInfo || shootResult.shootInfo.length < 1) {\r\n            return;\r\n        }\r\n        var shootInfo = shootResult.shootInfo;\r\n        for (var key in shootInfo) {\r\n            var doShootId = key;\r\n            var beShootArr = shootInfo[key];\r\n            for (var i = 0; i < beShootArr.length; i++) {\r\n                var beShootId = beShootArr[i];\r\n                var seatIndex0 = cc.sssNetMgr.getSeatIndexByID(doShootId);\r\n                var index0 = cc.sssNetMgr.getLocalIndex(seatIndex0);\r\n                var seatIndex1 = cc.sssNetMgr.getSeatIndexByID(beShootId);\r\n                var index1 = cc.sssNetMgr.getLocalIndex(seatIndex1);\r\n\r\n                var data = {};\r\n                data.index0 = index0;\r\n                data.index1 = index1;\r\n                var setShoot = function (target, data) {\r\n                    if (!target.getComponent('gameSeats').seatComs[data.index1]) {\r\n                        return;\r\n                    }\r\n                    if (!target.getComponent('gameSeats').seatComs[data.index0]) {\r\n                        return;\r\n                    }\r\n                    target.getComponent('gameSeats').seatComs[data.index1].showShoot(false, data.index0, data.index1);\r\n                    target.getComponent('gameSeats').seatComs[data.index0].showShoot(true, data.index0, data.index1);\r\n                }\r\n                arrSeq.push(cc.delayTime(1));\r\n                arrSeq.push(cc.callFunc(setShoot, this.node, data));\r\n            }\r\n        }\r\n\r\n        //打枪后分数显示\r\n        var setAllScore = function (target, data) {\r\n            for (let i = 0; i < data.length; i++) {\r\n                var userId = data[i].userId;\r\n                var score = data[i].score;\r\n                var seatIndex = cc.sssNetMgr.getSeatIndexByID(userId);\r\n                var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n                if (!target.getComponent('gameSeats').seatComs[index]) {\r\n                    return;\r\n                }\r\n                target.getComponent('gameSeats').seatComs[index].setAllScore(score);\r\n            }\r\n        }\r\n        arrSeq.push(cc.delayTime(1));\r\n        arrSeq.push(cc.callFunc(setAllScore, this.node, shootResult.shootScore));\r\n\r\n\r\n        //全垒打\r\n        if (shootResult.swatUserId > 0) {\r\n            var animation = window.sssGame.Animation;\r\n            var showSwat = function (target, data) {\r\n                window.sssGame.Animation.quanleida.active = true;\r\n                window.sssGame.Animation.quanleida.getComponent(cc.Animation).play('quanleida');\r\n                cc.audio.playSFX(\"sssMusic/quanleda.mp3\");\r\n            }\r\n\r\n            arrSeq.push(cc.delayTime(1));\r\n            arrSeq.push(cc.callFunc(showSwat, this.node, data));\r\n\r\n        }\r\n    },\r\n\r\n    showCompareResult: function (arrSeq, tdRes, zdRes, wdRes) {\r\n        if (tdRes.length < 1 || zdRes.length < 1 || wdRes.length < 1) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < tdRes.length; i++) {\r\n            var data = {};\r\n            arrSeq.push(cc.delayTime(0.5));\r\n            if (tdRes[i]) {\r\n                var userID = tdRes[i].userId;\r\n                var score = tdRes[i].score;\r\n                var arrPai = tdRes[i].arrPai;\r\n                var type = this.getPaiType(arrPai);\r\n                var paiType = this.getRealType(type, 0);\r\n                var seatIndex = cc.sssNetMgr.getSeatIndexByID(userID);\r\n                var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n            }\r\n            cc.log(userID)\r\n            cc.log(seatIndex)\r\n\r\n            //显示牌背\r\n            this.seatComs[index].paibei();\r\n\r\n            data.comIndex = index;\r\n            data.arrPai = arrPai;\r\n            data.score = score;\r\n            data.paiType = paiType;\r\n\r\n            var setTD = function (target, data) {\r\n                if (!target.getComponent('gameSeats').seatComs[data.comIndex]) {\r\n                    return;\r\n                }\r\n                target.getComponent('gameSeats').seatComs[data.comIndex].isclickpb=false;\r\n                target.getComponent('gameSeats').seatComs[data.comIndex].showTD(data.arrPai, data.score, data.paiType);\r\n            }\r\n            arrSeq.push(cc.callFunc(setTD, this.node, data));\r\n        }\r\n        for (let i = 0; i < zdRes.length; i++) {\r\n            var data = {};\r\n            arrSeq.push(cc.delayTime(0.5));\r\n            if (zdRes[i]) {\r\n                var userID = zdRes[i].userId;\r\n                var score = zdRes[i].score;\r\n                var arrPai = zdRes[i].arrPai;\r\n                var type = this.getPaiType(arrPai);\r\n                var paiType = this.getRealType(type, 1);\r\n                var seatIndex = cc.sssNetMgr.getSeatIndexByID(userID);\r\n                var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n            }\r\n\r\n            data.comIndex = index;\r\n            data.arrPai = arrPai;\r\n            data.score = score;\r\n            data.paiType = paiType;\r\n\r\n            var setZD = function (target, data) {\r\n                if (!target.getComponent('gameSeats').seatComs[data.comIndex]) {\r\n                    return;\r\n                }\r\n                target.getComponent('gameSeats').seatComs[data.comIndex].showZD(data.arrPai, data.score, data.paiType);\r\n            }\r\n            arrSeq.push(cc.callFunc(setZD, this.node, data));\r\n        }\r\n        for (let i = 0; i < wdRes.length; i++) {\r\n            var data = {};\r\n            arrSeq.push(cc.delayTime(0.5));\r\n            if (wdRes[i]) {\r\n                var userID = wdRes[i].userId;\r\n                var score = wdRes[i].score;\r\n                var arrPai = wdRes[i].arrPai;\r\n                var type = this.getPaiType(arrPai);\r\n                var paiType = this.getRealType(type, 2);\r\n                var seatIndex = cc.sssNetMgr.getSeatIndexByID(userID);\r\n                var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n            }\r\n\r\n            data.comIndex = index;\r\n            data.arrPai = arrPai;\r\n            data.score = score;\r\n            data.paiType = paiType;\r\n\r\n            var setWD = function (target, data) {\r\n                if (!target.getComponent('gameSeats').seatComs[data.comIndex]) {\r\n                    return;\r\n                }\r\n                target.getComponent('gameSeats').seatComs[data.comIndex].showWD(data.arrPai, data.score, data.paiType);\r\n            }\r\n            arrSeq.push(cc.callFunc(setWD, this.node, data));\r\n        }\r\n    },\r\n\r\n    //对牌型牌值进行排序\r\n    arrSort: function (arrRes, arrTar) {\r\n        var len = arrRes.length;\r\n        if (len < 2) {\r\n            arrTar.push(arrRes[0]);\r\n            return;\r\n        }\r\n        var bPush = false;\r\n        for (let i = 0; i < len; i++) {\r\n            bPush = false;\r\n            for (let j = 0; j < len; j++) {\r\n                if (i !== j) {\r\n                    var result = this.comparePai(arrRes[i].arrPai, arrRes[j].arrPai);\r\n                    if (1 === result) {\r\n                        bPush = true;\r\n                    }\r\n                }\r\n            }\r\n            if (!bPush) {\r\n                arrTar.push(arrRes[i]);\r\n                arrRes.splice(i, 1);\r\n                this.arrSort(arrRes, arrTar);\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    getRealType: function (paiType, dunIndex) {\r\n        switch (dunIndex) {\r\n            case 0: //头道\r\n                if (paiType === PaiType.ST) {\r\n                    paiType = 14;\r\n                }\r\n                break;\r\n            case 1: //中道\r\n                if (paiType === PaiType.WT) {\r\n                    paiType = 12;\r\n                }\r\n                else if (paiType === PaiType.THS) {\r\n                    paiType = 13;\r\n                }\r\n                else if (paiType === PaiType.HL) {\r\n                    paiType = 15;\r\n                }\r\n                else if (paiType === PaiType.TZ) {\r\n                    paiType = 16;\r\n                }\r\n                break;\r\n            case 2: //尾道\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return paiType;\r\n    },\r\n\r\n    //获取牌的类型\r\n    getPaiType: function (arrPai) {\r\n        var arrType = [];\r\n        window.sssGame.myPaiCom.sortPai(arrPai);\r\n        arrType = window.sssGame.Compare.getType(arrPai);\r\n        return arrType[0];\r\n    },\r\n    //以牌值和牌型对比大小\r\n    comparePai: function (arrPai1, arrPai2) {\r\n        var type1 = this.getPaiType(arrPai1);\r\n        var type2 = this.getPaiType(arrPai2);\r\n        if (type1 > type2) {\r\n            return 1;\r\n        }\r\n        else if (type1 === type2) {\r\n            return this.Compare.compareSameType(arrPai1, arrPai2, type1);\r\n        }\r\n        else {\r\n            return -1;\r\n        }\r\n    },\r\n\r\n    //显示牌背\r\n    setPaibei: function (data) {\r\n        var playerData = data.allScore;\r\n        for (let i = 0; i < playerData.length; i++) {\r\n            var len = playerData[i].arrPai.length;            \r\n            this.uidSeats[playerData[i].userId].paibei(len)\r\n            var seatIndex = cc.sssNetMgr.getSeatIndexByID(playerData[i].userId);\r\n            var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n            this.seatComs[index].paibei(len);\r\n        }\r\n    },\r\n\r\n    setScore: function (data) {\r\n        //特殊牌显示完之后的分数显示\r\n        var allScore = data.allScore;\r\n\r\n        for (var key in allScore) {\r\n            var score = allScore[key].score;\r\n            var userId = allScore[key].userId;\r\n            var seatIndex = cc.sssNetMgr.getSeatIndexByID(userId);\r\n            var index = cc.sssNetMgr.getLocalIndex(seatIndex);\r\n            this.seatComs[index].setAllScore(score);\r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
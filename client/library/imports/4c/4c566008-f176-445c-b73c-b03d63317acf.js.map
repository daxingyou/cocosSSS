{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame/assets\\Script\\sss\\sssgame\\setType.js"],"names":["PaiType","require","cc","Class","extends","Component","properties","onLoad","children","node","posX","i","length","getChildByName","tag","preBtnTag","thisBtnTag","Compare","getType","touchCom","parent","getComponent","myPaiCom","myPai","arrPai","getMyPaiData","arrType","console","log","bActive","j","active","sssNetMgr","specialType","WT","onBtnClicked","event","audio","playSFX","target","shezhipaiCom","shezhiPai","reset","data","type","isshow","emitter","emit","sssNet","send","YD","bSame","b_obtainType","Duizi","getDuiZi","setUp","ED","Duizi0","getLiangDui","Duizi1","push","ST","sanTiao","getSanTiao","SZ","shunZi","getShunZi","TH","tongHua","getTongHua","HL","huLu","getHuLu","TZ","tieZhi","getTieZhi","THS","tongHuaShun","wutong","getWuTong"],"mappings":"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","file":"setType.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame","sourcesContent":["var PaiType = require(\"define\").PaiType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var children = this.node.children;\r\n        var posX = -520;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var node = this.node.getChildByName(\"type\"+i);\r\n            node.tag = i+2;\r\n        }\r\n        this.preBtnTag = 0;\r\n        this.thisBtnTag = 0;\r\n        this.Compare = require(\"Compare\");\r\n    },\r\n\r\n    //获取到百变或者普通\r\n    getType:function(){\r\n        var touchCom = this.node.parent.getComponent(\"touch\");\r\n        var myPaiCom = touchCom.myPai.getComponent(\"myPai\");\r\n        var arrPai = myPaiCom.getMyPaiData();\r\n        var arrType = [];\r\n\r\n        arrType = this.Compare.getType(arrPai);\r\n\r\n        console.log('arrType: '+arrType);\r\n        //把牌型对应的按钮显示\r\n        for(var i = 0;i < this.node.children.length;i++){\r\n            var children = this.node.getChildByName(\"type\"+i);\r\n            var bActive = false;\r\n            if(arrType){\r\n                for(var j = 0;j<arrType.length;j++){\r\n                    if(children.tag === arrType[j]){\r\n                        bActive = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            children.active = bActive;\r\n        }\r\n        \r\n        //如果是特殊牌，则显示报道\r\n        if (cc.sssNetMgr.specialType > PaiType.WT){\r\n            var children = this.node.getChildByName(\"type9\");\r\n            children.active = true;\r\n        }\r\n    },\r\n\r\n    onBtnClicked:function(event){\r\n        var touchCom = this.node.parent.getComponent(\"touch\");\r\n        var myPaiCom = touchCom.myPai.getComponent(\"myPai\");\r\n        var arrPai = myPaiCom.getMyPaiData();\r\n        cc.audio.playSFX(\"sssMusic/fangpai.mp3\");\r\n        \r\n        cc.log(event.target.tag);\r\n        //特殊牌处理\r\n        if(event.target.tag > PaiType.WT){\r\n            var touchCom = this.node.parent.getComponent(\"touch\");\r\n            var shezhipaiCom = touchCom.shezhiPai.getComponent(\"shezhipai\");\r\n            shezhipaiCom.reset();\r\n            var data={type:cc.sssNetMgr.specialType,isshow:true};\r\n            cc.emitter.emit(\"special_card\", data);\r\n            cc.sssNet.send('special_card');\r\n            return;\r\n        }\r\n        \r\n        switch(event.target.tag){\r\n            case PaiType.YD:\r\n                console.log(\"onBtnClicked type0\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.YD;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var Duizi = this.Compare.getDuiZi(arrPai,bSame);\r\n                touchCom.setUp(Duizi);\r\n                this.preBtnTag = PaiType.YD;\r\n                break;\r\n            case PaiType.ED:\r\n                console.log(\"onBtnClicked type1\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.ED;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var Duizi0 = this.Compare.getLiangDui(arrPai,bSame);\r\n                var Duizi1 = this.Compare.getLiangDui(arrPai,true);\r\n                for(var i = 0;i<Duizi0.length;i++){\r\n                    Duizi1.push(Duizi0[i]);\r\n                }\r\n                touchCom.setUp(Duizi1);\r\n                this.preBtnTag = PaiType.ED;\r\n                break;\r\n            case PaiType.ST:\r\n                console.log(\"onBtnClicked type2\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.ST;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var sanTiao = this.Compare.getSanTiao(arrPai,bSame);\r\n                touchCom.setUp(sanTiao);\r\n                this.preBtnTag = PaiType.ST;\r\n                break;\r\n            case PaiType.SZ:\r\n                console.log(\"onBtnClicked type3\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.SZ;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var shunZi = this.Compare.getShunZi(arrPai,bSame,false);\r\n                touchCom.setUp(shunZi);\r\n                this.preBtnTag = PaiType.SZ;\r\n                break;\r\n            case PaiType.TH:\r\n                console.log(\"onBtnClicked type4\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.TH;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var tongHua = this.Compare.getTongHua(arrPai,bSame);\r\n                touchCom.setUp(tongHua);\r\n                \r\n                this.preBtnTag = PaiType.TH;\r\n                break;\r\n            case PaiType.HL:\r\n                console.log(\"onBtnClicked type5\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.HL;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var huLu = this.Compare.getHuLu(arrPai,bSame);\r\n                touchCom.setUp(huLu);\r\n                \r\n                this.preBtnTag = PaiType.HL;\r\n                break;\r\n            case PaiType.TZ:\r\n                console.log(\"onBtnClicked type6\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.TZ;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var tieZhi = this.Compare.getTieZhi(arrPai,bSame);\r\n                touchCom.setUp(tieZhi);\r\n                \r\n                this.preBtnTag = PaiType.TZ;\r\n                break;\r\n            case PaiType.THS:\r\n                console.log(\"onBtnClicked type7\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.THS;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var tongHuaShun = this.Compare.getShunZi(arrPai,bSame,true);\r\n                touchCom.setUp(tongHuaShun);\r\n                \r\n                this.preBtnTag = PaiType.THS;\r\n                break;\r\n            case PaiType.WT:\r\n                console.log(\"onBtnClicked type8\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.WT;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var wutong = this.Compare.getWuTong(arrPai,bSame);\r\n                touchCom.setUp(wutong);\r\n                \r\n                this.preBtnTag = PaiType.WT;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
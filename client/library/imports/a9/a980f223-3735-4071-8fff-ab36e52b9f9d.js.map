{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Header.js"],"names":["cc","Class","extends","Component","properties","money","default","type","Label","nickname","atlas","SpriteAtlas","icon","Node","banker","hu_times","offline","big_header_prefab","Prefab","init","mjnode","dir","uid","name","value","node","active","string","src_icon","value_ab","Utils","UrlImage","err","sprite","getComponent","Sprite","spriteFrame","on","EventType","TOUCH_START","showBigHeader","bind","value_","Math","floor","set_banker","parent","set_offline","no_waiting","header","instantiate","getChildByName"],"mappings":"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","file":"Header.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        money: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        nickname: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        atlas: {\r\n            default: null,\r\n            type: cc.SpriteAtlas\r\n        },\r\n        icon: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        banker: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        hu_times: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        offline: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        big_header_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n    init: function (mjnode, dir, uid, name, icon, value) {\r\n        this.node.active = false\r\n        this.mjnode = mjnode\r\n        this.dir = dir\r\n        this.uid = uid\r\n        this.nickname.string = name\r\n        this.src_icon = icon\r\n        this.money.string = this.value_ab(value)\r\n        Utils.UrlImage(icon, (err, sprite) => {\r\n            !err && (this.icon.getComponent(cc.Sprite).spriteFrame = sprite)\r\n            this.node.active = true\r\n        })\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.showBigHeader.bind(this))\r\n    },\r\n    value_ab: function (value) {\r\n        if (value < 10000) {\r\n            return '' + value\r\n        } else {\r\n            let value_ = Math.floor(value / 1000) * 1000\r\n            return '' + (value_ / 10000) + 'ä¸‡'\r\n        }\r\n    },\r\n    set_banker: function (hu_times) {\r\n        this.banker.active = true\r\n        if (hu_times > 0) {\r\n            this.hu_times.node.parent.active = true\r\n            this.hu_times.string = 'x ' + hu_times\r\n        }\r\n    },\r\n    set_offline(offline) {\r\n        this.offline.active = offline\r\n    },\r\n    showBigHeader() {\r\n        if (this.dir == 4 || !this.mjnode.no_waiting) return\r\n        let header = cc.instantiate(this.big_header_prefab)\r\n        header.parent = this.mjnode.node\r\n        header.getChildByName(\"BigHeader\").getComponent(\"BigHeader\").init(this.mjnode.node, this.dir, this.uid, this.nickname.string, this.src_icon)\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
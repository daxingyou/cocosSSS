{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\InviteMsg.js"],"names":["cc","Class","extends","Component","properties","icon","default","type","Node","msg","Label","mode","club","max_role","option","onLoad","init","data","query","room_id","info","id","dt","Date","valueOf","invition_delay","node","parent","mode_name","mj","string","club_id","option_text","onJoinRoom","http","tryJoinRoom","resp","errno","director","loadScene","content","scene","onShowTips"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAM;AACFC,qBAAS,IADP;AAEFC,kBAAMP,GAAGQ;AAFP,SADE;AAKRC,aAAK;AACDH,qBAAS,IADR;AAEDC,kBAAMP,GAAGU;AAFR,SALG;AASRC,cAAM;AACFL,qBAAS,IADP;AAEFC,kBAAMP,GAAGU;AAFP,SATE;AAaRE,cAAM;AACFN,qBAAS,IADP;AAEFC,kBAAMP,GAAGU;AAFP,SAbE;AAiBRG,kBAAU;AACNP,qBAAS,IADH;AAENC,kBAAMP,GAAGU;AAFH,SAjBF;AAqBRI,gBAAQ;AACJR,qBAAS,IADL;AAEJC,kBAAMP,GAAGU;AAFL;AArBA,KAHP;AA6BLK,YAAQ,kBAAY,CACnB,CA9BI;AA+BLC,UAAM,cAAUC,IAAV,EAAgB;AAClBA,eAAOA,KAAKC,KAAZ;AACA,aAAKC,OAAL,GAAeF,KAAKG,IAAL,CAAUC,EAAzB;AACA,YAAIC,KAAK,CAAC,EAAE,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,IAAzB,CAAV;AACA,YAAIxB,GAAGyB,cAAH,CAAkB,KAAKN,OAAvB,KAAmCnB,GAAGyB,cAAH,CAAkB,KAAKN,OAAvB,IAAkCG,KAAK,EAA9E,EAAkF;AAC9E,iBAAKI,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,SAFD,MAEO;;AAEH,gBAAIC,YAAYX,KAAKG,IAAL,CAAUN,MAAV,CAAiBe,EAAjB,IAAuB,MAAvB,GAAgC,MAAhC,GAAyC,MAAzD;AACA,iBAAKpB,GAAL,CAASqB,MAAT,GAAkB,oBAAoBF,SAApB,GAAgC,IAAlD;AACA,iBAAKjB,IAAL,CAAUmB,MAAV,GAAmB,UAAUF,SAA7B;AACA,iBAAKhB,IAAL,CAAUkB,MAAV,GAAmB,WAAWb,KAAKc,OAAnC;AACA,iBAAKlB,QAAL,CAAciB,MAAd,GAAuB,eAAeb,KAAKG,IAAL,CAAUN,MAAV,CAAiBD,QAAhC,GAA2C,GAAlE;AACA,iBAAKC,MAAL,CAAYgB,MAAZ,GAAqBb,KAAKG,IAAL,CAAUY,WAA/B;;AAEAhC,eAAGyB,cAAH,CAAkB,KAAKN,OAAvB,IAAkCG,EAAlC;AACH;AACJ,KAhDI;AAiDLW,gBAAY,sBAAY;AACpBC,aAAKC,WAAL,CAAiB,KAAKhB,OAAtB,EAA+B,UAACiB,IAAD,EAAU;AACrC,gBAAI,CAACA,KAAKC,KAAV,EAAiB;AACbrC,mBAAGsC,QAAH,CAAYC,SAAZ,CAAsB,QAAtB;AACH,aAFD,MAEO;AACH,oBAAIC,UAAU,eAAd;AACAxC,mBAAGyC,KAAH,CAASC,UAAT,CAAoB,IAApB,EAA0BF,OAA1B;AACH;AACJ,SAPD;AAQH;AACD;;AAEA;;AAEA;;AAEA;AAjEK,CAAT","file":"InviteMsg.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        icon: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        msg: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        mode: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        club: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        max_role: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        option: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n    },\r\n    onLoad: function () {\r\n    },\r\n    init: function (data) {\r\n        data = data.query\r\n        this.room_id = data.info.id\r\n        let dt = ~~(new Date().valueOf() / 1000)\r\n        if (cc.invition_delay[this.room_id] && cc.invition_delay[this.room_id] > dt - 15) {\r\n            this.node.parent = null\r\n        } else {\r\n\r\n            let mode_name = data.info.option.mj == 'fzmj' ? \"福州麻将\" : \"宁德麻将\"\r\n            this.msg.string = \"我在俱乐部等你，快来跟我一起玩\" + mode_name + \"吧~\"\r\n            this.mode.string = \"玩法名称：\" + mode_name\r\n            this.club.string = \"俱乐部ID：\" + data.club_id\r\n            this.max_role.string = \"人       数：\" + data.info.option.max_role + \"人\"\r\n            this.option.string = data.info.option_text\r\n\r\n            cc.invition_delay[this.room_id] = dt\r\n        }\r\n    },\r\n    onJoinRoom: function () {\r\n        http.tryJoinRoom(this.room_id, (resp) => {\r\n            if (!resp.errno) {\r\n                cc.director.loadScene(\"mjgame\")\r\n            } else {\r\n                let content = \"哎呀，来迟了，该房间已满人\"\r\n                cc.scene.onShowTips(\"OK\", content);\r\n            }\r\n        })\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n});\r\n"]}
{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\components/assets\\Script\\sss\\components\\UserInfoShow.js"],"names":["cc","Class","extends","Component","properties","_userinfo","onLoad","vv","find","active","_money","_kickout","moneyInfo","getComponent","utils","addClickEvent","node","userinfoShow","_userId","initView","self","onGet","ret","log","errcode","console","errmsg","gems","string","data","account","userMgr","sign","sssHttp","sendRequest","bind","show","name","userId","iconSprite","sex","ip","sssNetMgr","seats","userid","isOwner","getChildByName","Sprite","spriteFrame","Label","onClicked"],"mappings":"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","file":"UserInfoShow.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _userinfo:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this._userinfo = cc.find(\"Canvas/userinfo\");\r\n        this._userinfo.active = false;\r\n        this._money = cc.find(\"Canvas/userinfo/money\");\r\n        this._kickout = cc.find(\"Canvas/userinfo/kickout\");\r\n        this.moneyInfo = this._money.getComponent('cc.Label');\r\n        cc.vv.utils.addClickEvent(this._userinfo,this.node,\"UserInfoShow\",\"onClicked\");\r\n        \r\n        cc.vv.userinfoShow = this;\r\n        this._userId = null;\r\n        // this.initView();\r\n    },\r\n    \r\n    initView:function() {\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            cc.log(ret)\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                if(ret.gems != null){\r\n                    this.moneyInfo.string = ret.gems;    \r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n        };\r\n        cc.sssHttp.sendRequest(\"/get_user_status\",data,onGet.bind(this));\r\n    },\r\n\r\n    show:function(name,userId,iconSprite,sex,ip){\r\n        if(userId != null && userId > 0){\r\n            if(userId != cc.sssNetMgr.seats[0].userid && cc.sssNetMgr.isOwner()){\r\n                this._kickout.active=true;\r\n            }else{\r\n                this._kickout.active=false;\r\n            }\r\n            // this._kickout.active=false;\r\n            this._userinfo.active = true;\r\n            this._userinfo.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = iconSprite.spriteFrame;\r\n            \r\n            this._userinfo.getChildByName(\"name\").getComponent(cc.Label).string = name;\r\n            this._userinfo.getChildByName(\"id\").getComponent(cc.Label).string = \"ID: \" + userId;\r\n            this._userId = userId;\r\n        }\r\n    },\r\n    \r\n    onClicked:function(){\r\n        this._userinfo.active = false;\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Invite.js"],"names":["cc","Class","extends","Component","properties","invite_club_member_prefab","default","type","Prefab","content","Node","onLoad","scene","showWaiting","node","waiting","http","sendTick","method","club_id","mj","user","resp","load_idx","items","members","Task","runAfter","closePopWin","showMembers","i","length","member","instantiate","getComponent","init","parent","setPosition","height","scrollEvent","sender","event","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mCAA2B;AACvBC,qBAAS,IADc;AAEvBC,kBAAMP,GAAGQ;AAFc,SADnB;AAKRC,iBAAS;AACLH,qBAAS,IADJ;AAELC,kBAAMP,GAAGU;AAFJ;AALD,KAHP;AAaLC,YAAQ,kBAAY;AAAA;;AAChBX,WAAGY,KAAH,CAASC,WAAT,CAAqB,WAArB,EAAkC,UAACC,IAAD,EAAU;AACxC,kBAAKC,OAAL,GAAeD,IAAf;AACH,SAFD;AAGAE,aAAKC,QAAL,CAAc,EAAEC,QAAQ,cAAV,EAA0BC,SAASnB,GAAGoB,EAAH,CAAMC,IAAN,CAAWF,OAA9C,EAAd,EAAuE,UAACG,IAAD,EAAU;AAC7E,kBAAKC,QAAL,GAAgB,CAAhB;AACA,kBAAKC,KAAL,GAAaF,KAAKG,OAAlB;AACAC,iBAAKC,QAAL,CAAc,GAAd,EAAmB,YAAM;AAAE3B,mBAAGY,KAAH,CAASgB,WAAT,CAAqB,MAAKb,OAA1B;AAAoC,aAA/D;AACH,SAJD;AAKH,KAtBI;AAuBLc,iBAAa,qBAAUP,IAAV,EAAgB;AACzB,aAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIR,KAAKG,OAAL,CAAaM,MAAjC,EAAyCD,GAAzC,EAA8C;AAC1C,gBAAIE,SAASV,KAAKG,OAAL,CAAaK,CAAb,CAAb;AACA,gBAAIhB,OAAOd,GAAGiC,WAAH,CAAe,KAAK5B,yBAApB,CAAX;AACAS,iBAAKoB,YAAL,CAAkB,kBAAlB,EAAsCC,IAAtC,CAA2CH,MAA3C;AACAlB,iBAAKsB,MAAL,GAAc,KAAK3B,OAAnB;AACAK,iBAAKuB,WAAL,CAAiB,CAAjB,EAAoB,EAAEvB,KAAKwB,MAAL,GAAc,EAAhB,IAAsBR,CAA1C;AACA,iBAAKrB,OAAL,CAAa6B,MAAb,GAAsB,CAACxB,KAAKwB,MAAL,GAAc,EAAf,KAAsBR,IAAI,CAA1B,CAAtB;AACH;AACJ,KAhCI;AAiCLS,iBAAa,qBAAUC,MAAV,EAAkBC,KAAlB,EAAyB,CACrC,CAlCI;AAmCL;;AAEA;;AAEA;;AAEA;AACAC,UA1CK,kBA0CEC,EA1CF,EA0CM;AACP,YAAI,KAAKnB,KAAL,IAAc,KAAKD,QAAL,GAAgB,KAAKC,KAAL,CAAWO,MAA7C,EAAqD;AACjD,gBAAIjB,OAAOd,GAAGiC,WAAH,CAAe,KAAK5B,yBAApB,CAAX;AACAS,iBAAKoB,YAAL,CAAkB,kBAAlB,EAAsCC,IAAtC,CAA2C,KAAKX,KAAL,CAAW,KAAKD,QAAhB,CAA3C;AACAT,iBAAKsB,MAAL,GAAc,KAAK3B,OAAnB;AACA,iBAAKc,QAAL,IAAiB,CAAjB;AACH;AACJ;AAjDI,CAAT","file":"Invite.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        invite_club_member_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        content: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n    },\r\n    onLoad: function () {\r\n        cc.scene.showWaiting(\"正在获取俱乐部成员\", (node) => {\r\n            this.waiting = node\r\n        })\r\n        http.sendTick({ method: \"club.members\", club_id: cc.mj.user.club_id }, (resp) => {\r\n            this.load_idx = 0\r\n            this.items = resp.members\r\n            Task.runAfter(500, () => { cc.scene.closePopWin(this.waiting) })\r\n        })\r\n    },\r\n    showMembers: function (resp) {\r\n        for (let i = 0; i < resp.members.length; i++) {\r\n            let member = resp.members[i]\r\n            let node = cc.instantiate(this.invite_club_member_prefab)\r\n            node.getComponent(\"InviteClubMember\").init(member)\r\n            node.parent = this.content\r\n            node.setPosition(0, -(node.height + 15) * i);\r\n            this.content.height = (node.height + 15) * (i + 1)\r\n        }\r\n    },\r\n    scrollEvent: function (sender, event) {\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n    update(dt) {\r\n        if (this.items && this.load_idx < this.items.length) {\r\n            let node = cc.instantiate(this.invite_club_member_prefab)\r\n            node.getComponent(\"InviteClubMember\").init(this.items[this.load_idx])\r\n            node.parent = this.content\r\n            this.load_idx += 1\r\n        }\r\n    },\r\n});\r\n"]}
{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame/assets\\Script\\sss\\sssgame\\sssHTTP.js"],"names":["URL","HTTP","cc","Class","extends","Component","statics","sessionId","userId","master_url","url","sendRequest","path","data","handler","extraUrl","xhr","loader","getXMLHttpRequest","timeout","str","k","requestURL","encodeURI","open","sys","isNative","setRequestHeader","onreadystatechange","readyState","status","ret","JSON","parse","responseText","e","console","log","vv","wc","send"],"mappings":";;;;;;AACA,IAAIA,MAAM,2BAAV;AACA;;AAEA,IAAIC,OAAOC,GAAGC,KAAH,CAAS;AAChBC,aAASF,GAAGG,SADI;;AAGhBC,aAAQ;AACJC,mBAAY,CADR;AAEJC,gBAAS,CAFL;AAGJC,oBAAWT,GAHP;AAIJU,aAAIV,GAJA;AAKJW,qBAAc,qBAASC,IAAT,EAAcC,IAAd,EAAmBC,OAAnB,EAA2BC,QAA3B,EAAoC;AAC9C,gBAAIC,MAAMd,GAAGe,MAAH,CAAUC,iBAAV,EAAV;AACAF,gBAAIG,OAAJ,GAAc,IAAd;AACA,gBAAIC,MAAM,GAAV;AACA,iBAAI,IAAIC,CAAR,IAAaR,IAAb,EAAkB;AACd,oBAAGO,OAAO,GAAV,EAAc;AACVA,2BAAO,GAAP;AACH;AACDA,uBAAOC,IAAI,GAAJ,GAAUR,KAAKQ,CAAL,CAAjB;AACH;AACD,gBAAGN,YAAY,IAAf,EAAoB;AAChBA,2BAAWd,KAAKS,GAAhB;AACH;AACD,gBAAIY,aAAaP,WAAWH,IAAX,GAAkBW,UAAUH,GAAV,CAAnC;AACA;AACAJ,gBAAIQ,IAAJ,CAAS,KAAT,EAAeF,UAAf,EAA2B,IAA3B;AACA,gBAAIpB,GAAGuB,GAAH,CAAOC,QAAX,EAAoB;AAChBV,oBAAIW,gBAAJ,CAAqB,iBAArB,EAAuC,cAAvC,EAAsD,yBAAtD;AACH;;AAEDX,gBAAIY,kBAAJ,GAAyB,YAAW;AAChC,oBAAGZ,IAAIa,UAAJ,KAAmB,CAAnB,IAAyBb,IAAIc,MAAJ,IAAc,GAAd,IAAqBd,IAAIc,MAAJ,GAAa,GAA9D,EAAmE;AAC/D;AACA,wBAAI;AACA,4BAAIC,MAAMC,KAAKC,KAAL,CAAWjB,IAAIkB,YAAf,CAAV;AACA,4BAAGpB,YAAY,IAAf,EAAoB;AAChBA,oCAAQiB,GAAR;AACH,yBAJD,CAIyB;AAC5B,qBALD,CAKE,OAAOI,CAAP,EAAU;AACRC,gCAAQC,GAAR,CAAY,SAASF,CAArB;AACA;AACH,qBARD,SASO;AACH,4BAAGjC,GAAGoC,EAAH,IAASpC,GAAGoC,EAAH,CAAMC,EAAlB,EAAqB;AACrB;AACC;AACJ;AACJ;AACJ,aAlBD;;AAoBA,gBAAGrC,GAAGoC,EAAH,IAASpC,GAAGoC,EAAH,CAAMC,EAAlB,EAAqB;AACjB;AACH;AACDvB,gBAAIwB,IAAJ;AACA,mBAAOxB,GAAP;AACH;AAlDG;AAHQ,CAAT,CAAX","file":"sssHTTP.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame","sourcesContent":["\r\nvar URL = \"http://106.75.101.90:9001\";\r\n// var URL =\"http://192.168.1.128:9001\"\r\n\r\nvar HTTP = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics:{\r\n        sessionId : 0,\r\n        userId : 0,\r\n        master_url:URL,\r\n        url:URL,\r\n        sendRequest : function(path,data,handler,extraUrl){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.timeout = 5000;\r\n            var str = \"?\";\r\n            for(var k in data){\r\n                if(str != \"?\"){\r\n                    str += \"&\";\r\n                }\r\n                str += k + \"=\" + data[k];\r\n            }\r\n            if(extraUrl == null){\r\n                extraUrl = HTTP.url;\r\n            }\r\n            var requestURL = extraUrl + path + encodeURI(str);\r\n            // console.log(\"RequestURL:\" + requestURL);\r\n            xhr.open(\"GET\",requestURL, true);\r\n            if (cc.sys.isNative){\r\n                xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\",\"text/html;charset=UTF-8\");\r\n            }\r\n            \r\n            xhr.onreadystatechange = function() {\r\n                if(xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)){\r\n                    // console.log(\"http res(\"+ xhr.responseText.length + \"):\" + xhr.responseText);\r\n                    try {\r\n                        var ret = JSON.parse(xhr.responseText);\r\n                        if(handler !== null){\r\n                            handler(ret);\r\n                        }                        /* code */\r\n                    } catch (e) {\r\n                        console.log(\"err:\" + e);\r\n                        //handler(null);\r\n                    }\r\n                    finally{\r\n                        if(cc.vv && cc.vv.wc){\r\n                        //       cc.vv.wc.hide();    \r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            \r\n            if(cc.vv && cc.vv.wc){\r\n                //cc.vv.wc.show();\r\n            }\r\n            xhr.send();\r\n            return xhr;\r\n        },\r\n    },\r\n});"]}
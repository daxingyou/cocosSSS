{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Club.js"],"names":["ScenePopWin","require","cc","Class","extends","properties","club_room_prefab","Prefab","club_room_prefab2","btn_create_room","Node","btn_mgr","one_club_prefab","label_title","Label","label_join","room_layout","club_layout","btn_club_info","node_create_back","wanfa_layout","one_wanfa_prefab","_onLoad","club_dict","name","club_type","string","btn_join_club","_children","http","sendTick","showClub","bind","room_dict","initEvt","getChildByName","active","mjroom","Task","onTask","mjroomStatus","onRefreshRoom","_onDisable","cur_club","cur_wanfa","mj","evt","regTickEvt","data","scene","showPrefab","node","getComponent","init","onShowTips","content","startHallTick","onClose","director","loadScene","showCreateRoom","sendGame","method","resp","errno","detail","i","msgs","length","msg","newEvt","mgr","recover","tryJoinRoom","mjroom_id","gotoGame","replay","status","gainHongdian","sendHall","k","hongdian","items","item","club_id","num","removeAllChildren","clubs","sys","localStorage","getItem","parent","instantiate","cs","selectClub","club","unSelected","admin","selected","setItem","showWanfa","res","setting_list","wanfa_type","mj_wanfa","type","uid","clubId","push","selectWanfa","wanfa","log","onShowJoinClub","game","refreshRoom","onShowClubInfo","onShowMgr","create_room","rooms","room","roles","option","siteNum","index","max_role","sort","r1","r2","room_id_list","member","room_id","on","EventType","TOUCH_START","forceDismiss","id","btn_join","joinClubRoom","zIndex","toString","option_text","u_icon","forlength","seatNum","j","Utils","UrlImage","icon","err","sprite","Sprite","spriteFrame","x","Number","indexOf","text","maxGames","round","mode","join"],"mappings":"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","file":"Club.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var ScenePopWin = require('./lib/ScenePopWin')\r\ncc.Class({\r\n    extends: ScenePopWin,\r\n\r\n    properties: {\r\n        club_room_prefab: cc.Prefab,\r\n        club_room_prefab2: cc.Prefab,\r\n        btn_create_room: cc.Node,\r\n        btn_mgr: cc.Node,\r\n        one_club_prefab: cc.Prefab,\r\n        label_title: cc.Label,\r\n        label_join: cc.Label,\r\n        room_layout: cc.Node,\r\n        club_layout: cc.Node,\r\n        btn_club_info: cc.Node,\r\n        node_create_back: cc.Node,\r\n        wanfa_layout: cc.Node,\r\n        one_wanfa_prefab:cc.Prefab\r\n    },\r\n    _onLoad: function () {\r\n        this.club_dict = {}\r\n        let name = cc.club_type == \"INTEGRAL_CLUB\" ? \"积分圈\" : \"朋友圈\"\r\n        this.label_title.string = name\r\n        this.label_join.string = \"加入更多\" + name\r\n        this.btn_join_club = this.club_layout._children[0]\r\n        http.sendTick({ \"method\": \"club.list\", club_type: cc.club_type }, this.showClub.bind(this))\r\n        this.room_dict = {}\r\n        this.initEvt()\r\n        this.node_create_back.getChildByName(\"create\").active = !cc.mjroom\r\n        this.node_create_back.getChildByName(\"back\").active = cc.mjroom != null\r\n\r\n        Task.onTask(1000, () => { cc.mjroom && this.mjroomStatus() })\r\n        Task.onTask(2000, () => { this.onRefreshRoom() })\r\n    },\r\n    _onDisable: function () {\r\n        cc.cur_club = null\r\n        cc.cur_wanfa = null\r\n    },\r\n    initEvt: function () {\r\n        cc.mj.evt.regTickEvt(\"RoomInvite\", (data) => {\r\n            cc.scene.showPrefab(\"牌局邀请\", true, (node) => {\r\n                node.getComponent(\"InviteMsg\").init(data)\r\n            })\r\n        })\r\n        cc.mj.evt.regTickEvt(\"JoinClub\", (data) => {\r\n            cc.scene.onShowTips(\"OK\", data.content, () => {\r\n                http.sendTick({ \"method\": \"club.list\", club_type: cc.club_type }, this.showClub.bind(this))\r\n            })\r\n        })\r\n\r\n        cc.mj.evt.regTickEvt(\"ExitClub\", (data) => {\r\n            cc.scene.onShowTips(\"OK\", data.content, () => {\r\n                http.sendTick({ \"method\": \"club.list\", club_type: cc.club_type }, this.showClub.bind(this))\r\n            })\r\n        })\r\n        http.startHallTick()\r\n    },\r\n    onClose: function () {\r\n        cc.director.loadScene(\"hall\")\r\n        cc.cur_club = null\r\n        cc.cur_wanfa = null\r\n    },\r\n    showCreateRoom: function () {\r\n        if (!cc.mjroom) {\r\n            cc.scene.showPrefab(\"创建房间\")\r\n        } else {\r\n            http.sendGame({ method: \"recover_game\" }, (resp) => {\r\n                if (!resp.errno) {\r\n                    cc.mjroom = resp.detail\r\n                    for (let i = 0; i < resp.msgs.length; i++) {\r\n                        let msg = resp.msgs[i]\r\n                        cc.mj.evt.newEvt(msg)\r\n                    }\r\n                    cc.mj.mgr.recover = true\r\n                    cc.director.loadScene(\"mjgame\");\r\n                } else {\r\n                    http.tryJoinRoom(cc.mjroom_id, (resp) => {\r\n                        if (resp.errno) {\r\n                            let content = resp.errno == 20002 ? \"房间满员，无法加入房间\" : \"积分不足，无法加入积分圈房间\"\r\n                            cc.scene.onShowTips(\"OK\", content)\r\n                        } else {\r\n                            cc.scene.gotoGame(\"正在进入牌局\")\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mjroomStatus: function () {\r\n        if (cc.mj.mgr.replay) return\r\n        http.sendGame({ method: \"mjroom_status\" }, (resp) => {\r\n            if (resp.status) {\r\n                http.sendGame({ method: \"recover_game\" }, (resp) => {\r\n                    if (!resp.errno) {\r\n                        cc.mjroom = resp.detail\r\n                        for (let i = 0; i < resp.msgs.length; i++) {\r\n                            let msg = resp.msgs[i]\r\n                            cc.mj.evt.newEvt(msg)\r\n                        }\r\n                        cc.mj.mgr.recover = true\r\n                        cc.director.loadScene(\"mjgame\");\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    gainHongdian: function () {\r\n        http.sendHall({ method: \"unhandled.reqs\" }, resp => {\r\n\r\n            for (let k in this.club_dict) {\r\n                this.club_dict[k].hongdian.active = false\r\n            }\r\n            for (let i = 0; i < resp.items.length; i++) {\r\n                let item = resp.items[i]\r\n                if (this.club_dict[item.club_id]) this.club_dict[item.club_id].hongdian.active = item.num > 0\r\n            }\r\n        })\r\n    },\r\n    showClub: function (resp) {\r\n        this.club_layout.removeAllChildren()\r\n        if (resp.clubs.length) {\r\n            this.btn_create_room.active = true\r\n            this.btn_club_info.active = true\r\n            let club_id = ~~cc.sys.localStorage.getItem(cc.club_type + \"_club_id\")\r\n            this.btn_join_club.parent = null\r\n\r\n            let clubs = resp.clubs\r\n            for (let i = 0; i < clubs.length; i++) {\r\n                let node = cc.instantiate(this.one_club_prefab)\r\n                let cs = node.getComponent(\"OneClub\")\r\n                cs.init(clubs[i], this.selectClub.bind(this))\r\n                if (club_id == cs.club_id || (i == club_id) || club_id == 0) {\r\n                    this.selectClub(cs)\r\n                }\r\n                node.parent = this.club_layout\r\n                this.club_dict[cs.club_id] = cs\r\n            }\r\n        }\r\n        this.btn_join_club.parent = this.club_layout\r\n    },\r\n    selectClub: function (club) {\r\n        if (cc.cur_club) cc.cur_club.unSelected()\r\n        cc.cur_club = club\r\n        this.admin = cc.cur_club.admin\r\n        this.btn_mgr.active = this.admin\r\n        cc.cur_club.selected()\r\n        // for (let k in this.room_dict) {\r\n        //     this.room_dict[k].parent = null\r\n        // }\r\n        // this.room_dict = {}\r\n        cc.sys.localStorage.setItem(cc.club_type + \"_club_id\", cc.cur_club.club_id)\r\n        http.sendHall({ \"method\": \"sss.room.get.setting\", club_id: cc.cur_club.club_id }, this.showWanfa.bind(this))\r\n    },\r\n    showWanfa:function (res) {\r\n        this.wanfa_layout.removeAllChildren()\r\n        if (res.setting_list){\r\n            let wanfa_type = ~~cc.sys.localStorage.getItem(\"wanfa\")\r\n            let item = res.setting_list\r\n            let mj_wanfa = { type: 0, uid: 0, clubId: cc.cur_club.club_id}\r\n            item.push(mj_wanfa);\r\n            for (let i = 0; i < item.length; i++) {\r\n                let node = cc.instantiate(this.one_wanfa_prefab)\r\n                let cs = node.getComponent(\"ClubWanfa\")\r\n                cs.init(item[i], this.selectWanfa.bind(this))\r\n                if (wanfa_type == cs.type) {\r\n                    this.selectWanfa(cs)\r\n                }\r\n                node.parent = this.wanfa_layout\r\n            }\r\n        }\r\n    },\r\n    selectWanfa:function(wanfa){\r\n        cc.log(wanfa)\r\n        if (cc.cur_wanfa) cc.cur_wanfa.unSelected()\r\n        cc.cur_wanfa = wanfa\r\n        cc.cur_wanfa.selected()\r\n        for (let k in this.room_dict) {\r\n            this.room_dict[k].parent = null\r\n        }\r\n        this.room_dict = {}\r\n\r\n        this.onRefreshRoom()\r\n        cc.sys.localStorage.setItem(\"wanfa\", cc.cur_wanfa.type)\r\n    },\r\n    onShowJoinClub: function () {\r\n        cc.scene.showPrefab(\"加入俱乐部\")\r\n    },\r\n    onRefreshRoom: function () {\r\n        if (!cc.cur_club) return\r\n        if (cc.cur_wanfa.type>0){\r\n            http.sendTick({ \"method\": \"club.room\", club_id: cc.cur_club.club_id,game:\"sss\",type:cc.cur_wanfa.type,uid:cc.cur_wanfa.uid }, this.refreshRoom.bind(this))\r\n        }else{\r\n            http.sendTick({ \"method\": \"club.room\", club_id: cc.cur_club.club_id }, this.refreshRoom.bind(this))\r\n        }\r\n        this.gainHongdian()\r\n    },\r\n    onShowClubInfo: function () {\r\n        if (!cc.cur_club) return\r\n        http.sendHall({ \"method\": \"club_info\", club_id: cc.cur_club.club_id }, (resp) => {\r\n            cc.scene.showPrefab(\"俱乐部详情\", false, (node) => {\r\n                node.getComponent(\"ClubInfo\").init(resp)\r\n            })\r\n        })\r\n    },\r\n    onShowMgr: function () {\r\n        cc.scene.showPrefab(\"俱乐部管理\")\r\n    },\r\n    refreshRoom: function (resp) {\r\n        let create_room = this.room_layout._children[0]\r\n        this.room_layout.removeAllChildren()\r\n        create_room.parent = this.room_layout\r\n        if (!resp.rooms) {\r\n            for (let k in this.room_dict) {\r\n                this.room_dict[k].parent = null\r\n            }\r\n            this.room_dict = {}\r\n            return\r\n        }\r\n        for (let i = 0; i < resp.rooms.length; i++) {\r\n            let room = resp.rooms[i]\r\n            if (cc.cur_wanfa.type>0){\r\n                if (room.roles.length < room.option.siteNum) {\r\n                    room.status = \"WAITING\"\r\n                    room.index = 1\r\n                } else {\r\n                    room.status = \"PLAYING\"\r\n                    room.index = 0\r\n                }\r\n            }else{\r\n                if (room.roles.length < room.max_role) {\r\n                    room.status = \"WAITING\"\r\n                    room.index = 1\r\n                } else {\r\n                    room.status = \"PLAYING\"\r\n                    room.index = 0\r\n                }\r\n            }\r\n           \r\n        }\r\n        resp.rooms.sort((r1, r2) => { return r1.index < r2.index ? 1 : -1 })\r\n        for (let i = 0; i < resp.rooms.length; i++) {\r\n            resp.rooms[i].index = i\r\n        }\r\n        let room_id_list = []\r\n        for (let i = 0; i < resp.rooms.length; i++) {\r\n            let room = resp.rooms[i]\r\n            if (!room.roles) continue\r\n            let member = null\r\n            let wanfa_type = cc.cur_wanfa.type\r\n            room_id_list.push(room.room_id)\r\n            if (this.room_dict[room.room_id]) {\r\n                member = this.room_dict[room.room_id]\r\n                member.parent = this.room_layout\r\n\r\n                let btn_mgr = member.getChildByName(\"btn_dismiss\")\r\n                this.admin && btn_mgr.on(cc.Node.EventType.TOUCH_START, this.forceDismiss.bind(this, room))\r\n                btn_mgr.active = this.admin && (!cc.mjroom || ~~cc.mjroom.id != ~~room.room_id)\r\n                let btn_join = member.getChildByName(\"btn_join\")\r\n                btn_join.on(cc.Node.EventType.TOUCH_START, this.joinClubRoom.bind(this, room))\r\n            } else {\r\n                // 单个房间prefab\r\n                if (wanfa_type > 0){\r\n                    member = cc.instantiate(this.club_room_prefab)\r\n                }else{\r\n                    member = cc.instantiate(this.club_room_prefab2)\r\n                }\r\n                member.parent = this.room_layout\r\n                this.room_dict[room.room_id] = member\r\n                let btn_mgr = member.getChildByName(\"btn_dismiss\")\r\n                this.admin && btn_mgr.on(cc.Node.EventType.TOUCH_START, this.forceDismiss.bind(this, room))\r\n                btn_mgr.active = this.admin && (!cc.mjroom || ~~cc.mjroom.id != ~~room.room_id)\r\n                let btn_join = member.getChildByName(\"btn_join\")\r\n                btn_join.on(cc.Node.EventType.TOUCH_START, this.joinClubRoom.bind(this, room))\r\n            }\r\n            member.zIndex = room.index\r\n            if(wanfa_type>0){\r\n                member.getChildByName(\"mode\").getComponent(cc.Label).string = room.option.siteNum.toString() + \"人\" +  \"十三水\"\r\n                member.getChildByName(\"option_text\").getComponent(cc.Label).string = this.option_text(wanfa_type, room.option)\r\n            }else{\r\n                member.getChildByName(\"mode\").getComponent(cc.Label).string = room.max_role.toString() + \"人\" + (wanfa_type > 0 ? \"十三水\" : (room.option.mj == \"ndmj\" ? \"宁德\" : \"福州\"))\r\n                member.getChildByName(\"option_text\").getComponent(cc.Label).string = this.option_text(wanfa_type, room.option)\r\n            }\r\n            if (room.status == \"WAITING\") {\r\n                member.getChildByName(\"btn_join\").active = cc.mjroom == null\r\n            } else {\r\n                member.getChildByName(\"btn_join\").active = false\r\n                !this.admin && (member.getChildByName(\"PLAYING\").active = true)\r\n            }\r\n            let u_icon = member.getChildByName(\"_icon\")\r\n            let forlength = wanfa_type > 0 ? room.option.seatNum:room.roles.length\r\n            cc.log(forlength)\r\n            for (let j = 0; j < room.roles.length; j++) {\r\n                Utils.UrlImage(room.roles[j].icon, (err, sprite) => {\r\n                    !err && (u_icon._children[j].getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = sprite)\r\n                    u_icon._children[j].active = true\r\n                })\r\n            }\r\n            for (let i = room.roles.length; i < u_icon._children.length; i++) {\r\n                u_icon._children[i].active = false\r\n            }\r\n        }\r\n        for (let k in this.room_dict) {\r\n            var x=Number(k);\r\n            if (room_id_list.indexOf(x) < 0) {\r\n                this.room_dict[k].parent = null\r\n                delete this.room_dict[k]\r\n            }\r\n        }\r\n    },\r\n    joinClubRoom: function (room) {\r\n        http.tryJoinRoom(room.room_id, (resp) => {\r\n            if (resp.errno) {\r\n                let content = resp.errno == 20002 ? \"房间满员，无法加入房间\" : \"积分不足，无法加入积分圈房间\"\r\n                cc.scene.onShowTips(\"OK\", content)\r\n            } else {\r\n                cc.director.loadScene(\"mjgame\")\r\n            }\r\n        })\r\n    },\r\n    forceDismiss: function (room) {\r\n        let content = \"确认解散该房间【\" + room.room_id + \"】\"\r\n        cc.scene.onShowTips(\"OK_CANCEL\", content, () => {\r\n            http.sendHall({ method: \"admin_dismiss\", room_id: room.room_id }, () => { })\r\n        })\r\n    },\r\n    option_text: function (type,option) {\r\n        let text = []\r\n        if(type>0){\r\n            text.push(option.maxGames + \"局\")\r\n            text.push(option.type == 1 ? \"经典场\" : (option.type == 2 ? \"循环场\" : (option.type == 3 ? \"全一色\" : \"王牌场\")))\r\n            text.push(\"俱乐部支付\")\r\n        }else{\r\n            text.push(option.round + \"局\")\r\n            text.push(option.mode == 2 ? \"放胡全赔\" : (option.mode == 3 ? \"放胡双倍单赔\" : \"放胡单赔\"))\r\n            text.push(\"俱乐部支付\")\r\n        }\r\n        \r\n        return text.join(\" \")\r\n    },\r\n});\r\n"]}
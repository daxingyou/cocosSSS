{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\OneClubXX.js"],"names":["cc","Class","extends","Component","properties","icon","default","type","Node","created","Label","btn_kick","label_integral","node_integral","node_xx","btn_integral_inc","btn_integral_dec","btn_agree","btn_refuse","role_name","role_id","admin","value1","value2","inc_integral_prefab","Prefab","dec_integral_prefab","tips_prefab","onLoad","init","club_type","club_id","data","showMember","showTixian","showReq","string","nickname","uid","slice","active","Utils","UrlImage","err","sprite","getComponent","Sprite","spriteFrame","integral","node","color","Color","on","EventType","TOUCH_START","addIntegral","bind","kick","is_inc","scene","showPrefab","val","agree","refuse","handle_tixian_req","pad","total_integral","remainder_integral","tips","instantiate","parent","cs","getChildByName","content","http","sendHall","method","tarid","resp","zIndex","remove_self","status","order_id"],"mappings":"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","file":"OneClubXX.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        icon: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        created: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        btn_kick: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        label_integral: cc.Label,\r\n        node_integral: cc.Node,\r\n        node_xx: cc.Node,\r\n        btn_integral_inc: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        btn_integral_dec: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        btn_agree: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        btn_refuse: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        role_name: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        role_id: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        admin: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        value1: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        value2: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        inc_integral_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        dec_integral_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        tips_prefab: cc.Prefab,\r\n    },\r\n    onLoad: function () {\r\n\r\n    },\r\n    init: function (club_type, club_id, data, type) {\r\n        this.data = data\r\n        this.club_type = club_type\r\n        if (type == \"MGR_MEMBER\") {\r\n            this.showMember(data)\r\n        } else if (type == \"MGR_TIXIAN\") {\r\n            this.showTixian()\r\n        }\r\n        else {\r\n            this.showReq(data)\r\n        }\r\n        this.club_id = club_id\r\n        this.role_name.string = data.nickname\r\n        this.role_id.string = \"ID：\" + data.uid\r\n        this.created.string = data.created.slice(0, 10)\r\n        this.admin.active = data.admin\r\n        Utils.UrlImage(data.icon, (err, sprite) => {\r\n            !err && (this.icon.getComponent(cc.Sprite).spriteFrame = sprite)\r\n        })\r\n    },\r\n    showMember: function () {\r\n        this.integral = ~~this.data.integral\r\n        this.label_integral.string = this.data.integral\r\n        if (this.data.integral < 0) this.label_integral.node.color = new cc.Color(255, 0, 0)\r\n        this.node_integral.active = this.club_type == \"INTEGRAL_CLUB\"\r\n        this.node_xx.active = this.club_type != \"INTEGRAL_CLUB\"\r\n        this.btn_integral_inc.on(cc.Node.EventType.TOUCH_START, this.addIntegral.bind(this, 1))\r\n        this.btn_integral_dec.on(cc.Node.EventType.TOUCH_START, this.addIntegral.bind(this, -1))\r\n        this.btn_kick.active = !this.data.admin\r\n        this.btn_kick.on(cc.Node.EventType.TOUCH_START, this.kick.bind(this))\r\n    },\r\n    addIntegral: function (is_inc) {\r\n        cc.scene.showPrefab(\"增减积分\", true, (node) => {\r\n            node.getComponent(\"ClubIntegral\").init(is_inc, this.club_id, this.data.uid, this.data.nickname, this.data.icon, (val) => {\r\n                this.integral += val\r\n                this.label_integral.string = this.integral\r\n            })\r\n        })\r\n    },\r\n    showReq: function () {\r\n        this.btn_agree.active = true\r\n        this.btn_agree.on(cc.Node.EventType.TOUCH_START, this.agree.bind(this))\r\n        this.btn_refuse.active = true\r\n        this.btn_refuse.on(cc.Node.EventType.TOUCH_START, this.refuse.bind(this))\r\n    },\r\n    showTixian: function () {\r\n        this.btn_agree.active = true\r\n        this.btn_agree.on(cc.Node.EventType.TOUCH_START, this.handle_tixian_req.bind(this, \"AGREE\"))\r\n        this.btn_refuse.active = true\r\n        this.btn_refuse.on(cc.Node.EventType.TOUCH_START, this.handle_tixian_req.bind(this, \"REFUSE\"))\r\n        this.value1.node.active = true\r\n        this.value2.node.active = true\r\n        this.value1.string = pad(this.data.total_integral, 4)\r\n        this.value2.string = pad(this.data.remainder_integral, 4)\r\n    },\r\n    kick: function () {\r\n        let tips = cc.instantiate(this.tips_prefab)\r\n        tips.parent = this.node.parent.parent.parent.parent\r\n        let cs = tips.getChildByName(\"Tips\").getComponent(\"Tips\")\r\n        let content = \"是否确认踢出该成员\"\r\n        cs.init(content, \"OK_CANCEL\", () => {\r\n            tips.parent = null\r\n            http.sendHall({ method: \"kick_club_member\", club_id: this.club_id, tarid: this.data.uid }, (resp) => { this.zIndex = 999; this.remove_self() })\r\n        }, () => {\r\n            tips.parent = null\r\n        })\r\n\r\n        // http.sendHall({ method: \"kick_club_member\", club_id: this.club_id, tarid: this.data.uid }, (resp) => { this.remove_self() })\r\n    },\r\n    agree: function () {\r\n        http.sendHall({ method: \"handle_club_req\", club_id: this.club_id, tarid: this.data.uid, status: \"AGREE\" }, (resp) => { this.remove_self() })\r\n    },\r\n    refuse: function () {\r\n        http.sendHall({ method: \"handle_club_req\", club_id: this.club_id, tarid: this.data.uid, status: \"REFUSE\" }, (resp) => { this.remove_self() })\r\n    },\r\n    handle_tixian_req: function (status) {\r\n        http.sendHall({ method: \"handle_tixian_req\", club_id: this.club_id, order_id: this.data.order_id, status: status }, (resp) => { this.remove_self() })\r\n    },\r\n    remove_self: function () {\r\n        this.node.parent = null\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
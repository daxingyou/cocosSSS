{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Progress.js"],"names":["cc","Class","extends","Component","properties","bar","default","type","Node","onLoad","node","setPositionX","name","mj","user","bgm","sfx","progress","position","x","getComponent","ProgressBar","on","EventType","TOUCH_MOVE","evt","dx","getLocationX","getPreviousLocation","Math","min","max","setVolumeBGM","setVolumeSFX","setValue","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,aAAK;AACDC,qBAAS,IADR;AAEDC,kBAAMP,GAAGQ;AAFR;AADG,KAHP;AASLC,YAAQ,kBAAY;AAAA;;AAChB,aAAKC,IAAL,CAAUC,YAAV,CAAuB,CAAC,KAAKN,GAAL,CAASO,IAAT,IAAiB,KAAjB,GAAyBZ,GAAGa,EAAH,CAAMC,IAAN,CAAWC,GAApC,GAA0Cf,GAAGa,EAAH,CAAMC,IAAN,CAAWE,GAAtD,IAA6D,GAApF;AACA,YAAIC,WAAW,KAAKP,IAAL,CAAUQ,QAAV,CAAmBC,CAAnB,GAAuB,GAAtC;AACA,aAAKd,GAAL,CAASe,YAAT,CAAsBpB,GAAGqB,WAAzB,EAAsCJ,QAAtC,GAAiDA,QAAjD;AACA,aAAKP,IAAL,CAAUY,EAAV,CAAatB,GAAGQ,IAAH,CAAQe,SAAR,CAAkBC,UAA/B,EAA2C,UAACC,GAAD,EAAS;AAChD,gBAAIC,KAAKD,IAAIE,YAAJ,KAAqBF,IAAIG,mBAAJ,GAA0BT,CAAxD;AACA,kBAAKT,IAAL,CAAUC,YAAV,CAAuBkB,KAAKC,GAAL,CAAS,GAAT,EAAcD,KAAKE,GAAL,CAAS,CAAT,EAAY,MAAKrB,IAAL,CAAUQ,QAAV,CAAmBC,CAAnB,GAAuBO,EAAnC,CAAd,CAAvB;AACA,gBAAIT,WAAW,MAAKP,IAAL,CAAUQ,QAAV,CAAmBC,CAAnB,GAAuB,GAAtC;AACA,kBAAKd,GAAL,CAASe,YAAT,CAAsBpB,GAAGqB,WAAzB,EAAsCJ,QAAtC,GAAiDA,QAAjD;AACA,kBAAKZ,GAAL,CAASO,IAAT,IAAiB,KAAjB,GAAyBZ,GAAGa,EAAH,CAAMC,IAAN,CAAWkB,YAAX,CAAwBf,QAAxB,CAAzB,GAA6DjB,GAAGa,EAAH,CAAMC,IAAN,CAAWmB,YAAX,CAAwBhB,QAAxB,CAA7D;AACH,SAND;AAOH,KApBI;AAqBLiB,cAAU,kBAAUjB,QAAV,EAAoB;AAC1B,aAAKZ,GAAL,CAASe,YAAT,CAAsBpB,GAAGqB,WAAzB,EAAsCJ,QAAtC,GAAiDA,QAAjD;AACA,aAAKZ,GAAL,CAASO,IAAT,IAAiB,KAAjB,GAAyBZ,GAAGa,EAAH,CAAMC,IAAN,CAAWkB,YAAX,CAAwBf,QAAxB,CAAzB,GAA6DjB,GAAGa,EAAH,CAAMC,IAAN,CAAWmB,YAAX,CAAwBhB,QAAxB,CAA7D;AACA,aAAKP,IAAL,CAAUC,YAAV,CAAuBM,WAAW,GAAlC;AACH,KAzBI;AA0BL;AACAkB,YAAQ,gBAAUC,EAAV,EAAc,CAErB;AA7BI,CAAT","file":"Progress.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bar: {\r\n            default: null,\r\n            type: cc.Node\r\n        }\r\n    },\r\n    onLoad: function () {\r\n        this.node.setPositionX((this.bar.name == \"bgm\" ? cc.mj.user.bgm : cc.mj.user.sfx) * 500)\r\n        let progress = this.node.position.x / 500\r\n        this.bar.getComponent(cc.ProgressBar).progress = progress\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, (evt) => {\r\n            let dx = evt.getLocationX() - evt.getPreviousLocation().x\r\n            this.node.setPositionX(Math.min(500, Math.max(0, this.node.position.x + dx)))\r\n            let progress = this.node.position.x / 500\r\n            this.bar.getComponent(cc.ProgressBar).progress = progress\r\n            this.bar.name == \"bgm\" ? cc.mj.user.setVolumeBGM(progress) : cc.mj.user.setVolumeSFX(progress)\r\n        })\r\n    },\r\n    setValue: function (progress) {\r\n        this.bar.getComponent(cc.ProgressBar).progress = progress\r\n        this.bar.name == \"bgm\" ? cc.mj.user.setVolumeBGM(progress) : cc.mj.user.setVolumeSFX(progress)\r\n        this.node.setPositionX(progress * 500)\r\n    },\r\n    // called every frame\r\n    update: function (dt) {\r\n\r\n    },\r\n});\r\n"]}
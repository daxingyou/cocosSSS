{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\UserMgr.js"],"names":["cc","Class","extends","Component","properties","uid","nickname","fangka","integral","bgm","sfx","style_mj","style_bg","style_sss","style_sssbg","statics","init","volume_bgm","sys","localStorage","getItem","volume_sfx","setVolumeBGM","setVolumeSFX","mjStyleBig","setStyleMJ","v","setItem","getStyleBg","setStyleBg","sssStyleBig","setStylesss","getStylesssBg","setStylesssBg","emitter","emit","parseFloat","audio","setBGMVolume","setSFXVolume","login","resp","log","token","http","id","icon","ip","director","loadScene","logout","wx_agent","anysdk","agentManager","wx_user_plugin","getUserPlugin","e","removeItem"],"mappings":"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","file":"UserMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        uid: null,\r\n        nickname: null,\r\n        fangka: 0,\r\n        integral: 0,\r\n        bgm: 1.0,\r\n        sfx: 1.0,\r\n        style_mj: \"big\",\r\n        style_bg: \"blue\",\r\n        style_sss:'big',\r\n        style_sssbg:'blue',\r\n    },\r\n    statics: {\r\n        init: function () {\r\n            let volume_bgm = cc.sys.localStorage.getItem(\"volume_bgm\")\r\n            let volume_sfx = cc.sys.localStorage.getItem(\"volume_sfx\")\r\n            this.setVolumeBGM(volume_bgm ? volume_bgm : 1.0)\r\n            this.setVolumeSFX(volume_sfx ? volume_sfx : 1.0)\r\n            let style_mj = cc.sys.localStorage.getItem(\"style_mj\")\r\n            this.style_mj = style_mj ? style_mj : \"big\"\r\n            let style_bg = cc.sys.localStorage.getItem(\"style_bg\")\r\n            this.style_bg = style_bg ? style_bg : \"green\"\r\n\r\n            let style_sss = cc.sys.localStorage.getItem(\"style_sss\")\r\n            this.style_sss = style_sss ? style_sss : \"big\"\r\n            let style_sssbg = cc.sys.localStorage.getItem(\"style_sssbg\")\r\n            this.style_sssbg = style_sssbg ? style_sssbg : \"blue\"\r\n        },\r\n        // 麻将\r\n        mjStyleBig: function () {\r\n            return this.style_mj == \"big\"\r\n        },\r\n        setStyleMJ: function (v) {\r\n            cc.sys.localStorage.setItem(\"style_mj\", v)\r\n            this.style_mj = v\r\n        },\r\n        getStyleBg: function (v) {\r\n            return this.style_bg\r\n        },\r\n        setStyleBg: function (v) {\r\n            cc.sys.localStorage.setItem(\"style_bg\", v)\r\n            this.style_bg = v\r\n        },\r\n        // 十三水\r\n        sssStyleBig: function () {\r\n            return this.style_sss == \"big\"\r\n        },\r\n        setStylesss: function (v) {\r\n            cc.sys.localStorage.setItem(\"style_sss\", v)\r\n            this.style_sss = v\r\n        },\r\n        getStylesssBg: function (v) {\r\n            return this.style_sssbg\r\n        },\r\n        setStylesssBg: function (v) {\r\n            cc.sys.localStorage.setItem(\"style_sssbg\", v)\r\n            this.style_sssbg = v\r\n            cc.emitter.emit('settingBg')\r\n        },\r\n\r\n        setVolumeBGM: function (v) {\r\n            v = parseFloat(v)\r\n            cc.sys.localStorage.setItem(\"volume_bgm\", v)\r\n            cc.audio.setBGMVolume(v, true)\r\n            this.bgm = v\r\n        },\r\n        setVolumeSFX: function (v) {\r\n            v = parseFloat(v)\r\n            cc.sys.localStorage.setItem(\"volume_sfx\", v)\r\n            cc.audio.setSFXVolume(v)\r\n            this.sfx = v\r\n        },\r\n        login: function (resp) {\r\n            cc.log(resp)\r\n            cc.sys.localStorage.setItem(\"token\", resp.token)\r\n            http.login(resp)\r\n            this.uid = resp.id\r\n            this.nickname = resp.nickname\r\n            this.fangka = resp.fangka\r\n            this.icon = resp.icon\r\n            this.ip = resp.ip\r\n            this.integral = resp.integral\r\n            cc.director.loadScene(\"hall\");\r\n        },\r\n        logout: function (resp) {\r\n            try {\r\n                this.wx_agent = anysdk.agentManager;\r\n                this.wx_user_plugin = this.wx_agent.getUserPlugin();\r\n                this.wx_user_plugin.logout()\r\n            } catch (e) { cc.log(e) }\r\n            http.logout(resp)\r\n            this.uid = null\r\n            this.nickname = null\r\n            this.fangka = 0\r\n            this.integral = 0\r\n            cc.sys.localStorage.removeItem(\"token\")\r\n            cc.director.loadScene(\"login\")\r\n        }\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
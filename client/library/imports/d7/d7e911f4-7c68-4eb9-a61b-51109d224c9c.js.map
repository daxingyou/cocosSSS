{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\ClubMgr.js"],"names":["cc","Class","extends","Component","properties","club_member_prefab","default","type","Prefab","club_join_exit_prefab","club_tixian_prefab","content","Node","waiting_prefab","time_title","Label","title_4","title_5","title_6","toggle_tixian","onLoad","cur_club","club_type","active","onMgrMember","showXX","items","removeAllChildren","load_idx","i","length","node","instantiate","club_xx_prefab","getComponent","init","club_id","parent","string","http","sendTick","method","resp","dayu_0_arr","xiaoyu_0_arr","dengyu_0_arr","members","req","integral","push","sort","m1","m2","concat","onMgrJoin","sendHall","reqs","onMgrExit","onMgrTixian","onBack","scrollEvent","sender","event","update","dt"],"mappings":"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","file":"ClubMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        club_member_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        club_join_exit_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        club_tixian_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        content: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        waiting_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        time_title: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        title_4: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        title_5: cc.Node,\r\n        title_6: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        toggle_tixian: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n    onLoad: function () {\r\n        cc.cur_club.club_type == \"INTEGRAL_CLUB\" && (this.toggle_tixian.active = true)\r\n        this.onMgrMember()\r\n    },\r\n    showXX: function (items, type) {\r\n        this.content.removeAllChildren()\r\n        this.load_idx = 0\r\n        this.items = items\r\n        this.type = type\r\n        for (let i = 0; i < 20 && i < items.length; i++) {\r\n            let node = cc.instantiate(this.club_xx_prefab)\r\n            node.getComponent(\"OneClubXX\").init(cc.cur_club.club_type, cc.cur_club.club_id, items[i], type)\r\n            node.parent = this.content\r\n            this.load_idx += 1\r\n        }\r\n    },\r\n    onMgrMember: function () {\r\n        this.title_5.active = true\r\n        this.title_4.active = false\r\n        this.title_6.active = false\r\n        this.time_title.string = \"加入时间\"\r\n        http.sendTick({ method: \"club.members\", club_id: cc.cur_club.club_id }, (resp) => {\r\n            this.club_xx_prefab = this.club_member_prefab\r\n\r\n\r\n            let dayu_0_arr = []\r\n            let xiaoyu_0_arr = []\r\n            let dengyu_0_arr = []\r\n            for (let i = 0; i < resp.members.length; i++) {\r\n                let req = resp.members[i]\r\n                req.integral = ~~req.integral\r\n                if (req.integral > 0) dayu_0_arr.push(req)\r\n                else if (req.integral == 0) dengyu_0_arr.push(req)\r\n                else xiaoyu_0_arr.push(req)\r\n            }\r\n            dayu_0_arr.sort((m1, m2) => { return m1.integral < m2.integral ? 1 : m1.integral == m2.integral ? 0 : -1 })\r\n\r\n            xiaoyu_0_arr.sort((m1, m2) => { return m1.integral < m2.integral ? -1 : m1.integral == m2.integral ? 0 : 1 })\r\n            let members = []\r\n            members = members.concat(xiaoyu_0_arr)\r\n            members = members.concat(dayu_0_arr)\r\n            members = members.concat(dengyu_0_arr)\r\n\r\n            this.showXX(members, \"MGR_MEMBER\")\r\n        })\r\n    },\r\n    onMgrJoin: function () {\r\n        this.title_4.active = true\r\n        this.title_5.active = false\r\n        this.title_6.active = false\r\n        this.time_title.string = \"申请时间\"\r\n        http.sendHall({ method: \"club_reqs\", club_id: cc.cur_club.club_id , type: \"JOIN\" }, (resp) => {\r\n            this.club_xx_prefab = this.club_join_exit_prefab\r\n            this.showXX(resp.reqs, \"JOIN\")\r\n        })\r\n    },\r\n    onMgrExit: function () {\r\n        this.title_4.active = true\r\n        this.title_5.active = false\r\n        this.title_6.active = false\r\n        this.time_title.string = \"申请时间\"\r\n        http.sendHall({ method: \"club_reqs\", club_id: cc.cur_club.club_id , type: \"EXIT\" }, (resp) => {\r\n            this.club_xx_prefab = this.club_join_exit_prefab\r\n            this.showXX(resp.reqs, \"EXIT\")\r\n        })\r\n    },\r\n    onMgrTixian: function () {\r\n        this.title_4.active = false\r\n        this.title_5.active = false\r\n        this.title_6.active = true\r\n        http.sendHall({ method: \"tixian_reqs\", club_id: this.club_id }, (resp) => {\r\n            this.club_xx_prefab = this.club_tixian_prefab\r\n            this.showXX(resp.reqs, \"MGR_TIXIAN\")\r\n        })\r\n    },\r\n    onBack: function () {\r\n        this.node.parent.parent = null\r\n    },\r\n    scrollEvent: function (sender, event) {\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n\r\n    update(dt) {\r\n        if (this.items && this.load_idx < this.items.length) {\r\n            let node = cc.instantiate(this.club_xx_prefab)\r\n            node.getComponent(\"OneClubXX\").init(this.club_type, this.club_id, this.items[this.load_idx], this.type)\r\n            node.parent = this.content\r\n            this.load_idx += 1\r\n        }\r\n    },\r\n});\r\n"]}
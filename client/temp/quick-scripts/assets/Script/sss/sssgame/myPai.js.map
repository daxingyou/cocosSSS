{"version":3,"sources":["myPai.js"],"names":["cc","Class","extends","Component","properties","baiBianPaiAtlas","default","type","SpriteAtlas","onLoad","initDt","arrPai","i","name","paiNode","node","getChildByName","push","setInfo","sssNetMgr","seats","index","seatIndex","data","holds","length","len","sortPai","myPaiData","paiCom","getComponent","active","console","log","getMyPaiData","setMyPaiData","arrPaiData","sortPai2","sortres","arr","sort","a","b","value","a1","a2","a3","a4","a5","addNum","tmp","j","arrs","x","concat"],"mappings":"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","file":"myPai.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        baiBianPaiAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas,\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n    },\r\n    initDt:function(){\r\n        this.arrPai = [];\r\n        for(var i = 1; i <= 13; i++){\r\n            var name = 'pai' + i;\r\n            var paiNode = this.node.getChildByName(name);\r\n            this.arrPai.push(paiNode);\r\n        };\r\n    },\r\n    setInfo:function(){\r\n        // console.log('myPai.setInfo');\r\n        if(!cc.sssNetMgr.seats){\r\n            return;\r\n        }\r\n        var index = cc.sssNetMgr.seatIndex;\r\n        var data = cc.sssNetMgr.seats[index].holds;\r\n        if(data.length < 1){\r\n            return false;\r\n        }\r\n        var len = this.arrPai.length;\r\n        \r\n        // console.log('data.len: '+data.length);\r\n        // cc.log(data)\r\n        this.sortPai(data);\r\n        this.myPaiData = [];\r\n        for(var i = 0; i < len; i++){\r\n            var paiCom = this.arrPai[i].getComponent('pai');\r\n            paiCom.setInfo(data[i]);\r\n            this.myPaiData.push(data[i]);\r\n            this.arrPai[i].active = true;\r\n        }\r\n        console.log('myPai.setInfo over');\r\n        return true;\r\n    },\r\n\r\n    getMyPaiData:function(){\r\n        return this.myPaiData;\r\n    },\r\n\r\n    setMyPaiData:function(arrPaiData){\r\n        this.myPaiData = [];\r\n        for(var i = 0; i < arrPaiData.length; i++){\r\n            this.myPaiData.push(arrPaiData[i]);\r\n        }\r\n    },\r\n\r\n    sortPai2:function(arrPai){\r\n        if(arrPai){\r\n            // arrPai.sort(function(a,b){\r\n            //     return b.value - a.value;\r\n            // });\r\n            this.sortres(arrPai)\r\n        }\r\n    },\r\n    sortPai: function (arrPai) {\r\n        if (arrPai) {\r\n           this.sortres(arrPai)\r\n        }\r\n    },\r\n    sortres: function (arr) {\r\n        arr.sort(function (a, b) { return b.value - a.value; })\r\n        var a1 = [], a2 = [], a3 = [], a4 = [], a5 = [];\r\n\r\n        function addNum(value, index) {\r\n            if (index == 0) {\r\n                a1.push(value);\r\n            }\r\n            else if (index == 1) {\r\n                a2.push(value);\r\n            }\r\n            else if (index == 2) {\r\n                a3.push(value);\r\n            }\r\n            else if (index == 3) {\r\n                a4.push(value);\r\n            }\r\n            else if (index == 4) {\r\n                a5.push(value);\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }\r\n\r\n        var tmp = [];\r\n        var len = arr.length;\r\n        var index = 0;\r\n        for (var i = 0; i < len; i++) {\r\n            addNum(arr[i], i);\r\n            index = 0;\r\n            for (var j = i + 1; j < len; j++) {\r\n                if (arr[i].value == arr[j].value) {\r\n                    addNum(arr[j], i);\r\n                    index++;\r\n                }\r\n            }\r\n            i = i + index;\r\n        }\r\n        var arrs = [a1, a2, a3, a4, a5];\r\n        arrs.sort(function (a, b) { return b.length - a.length })\r\n        for (var x = 0; x < arrs.length; x++) {\r\n            tmp = tmp.concat(arrs[x])\r\n        }\r\n        return tmp;\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
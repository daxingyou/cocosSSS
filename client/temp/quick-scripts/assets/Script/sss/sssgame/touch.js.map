{"version":3,"sources":["touch.js"],"names":["numSprites","PaiType","require","cc","Class","extends","Component","properties","shezhiPai","type","Node","default","myPai","paiTypeShow","_timeChild","_gewei","_shiwei","_baiwei","_tempHoldData","numAtlas","SpriteAtlas","onLoad","addY","norY","initSheZhi","initMyPai","arrUpPai","TDIndex","ZDIndex","WDIndex","arrUpPaiIndex","Compare","node","getChildByName","_curTurn","sssNetMgr","turn","bUpPai","tdPaitype","zdPaitype","wdPaitype","push","initHandler","setCountdown","data","time","gewei","shiwei","baiwei","t","Math","ceil","floor","spriteB","getComponent","Sprite","spriteS","spriteG","spriteFrameB","getSpriteFrame","getNumSpriteByNum","spriteFrameS","spriteFrameG","spriteFrame","reset","active","setAllDown","arrMyPai","arrMyPaiPos","posX","i","name","paiNode","paimask","scale","y","x","getPosition","addTouch","arrTDPai","arrZDPai","arrWDPai","arrSheZhiPai","tdNode","zdNode","wdNode","tempPaiNode","wanfa","btnBaipai","pai","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","tdPaiNode","tag","onSheZhiTouchStart","onSheZhiTouchMove","onSheZhiTouchEnd","TOUCH_CANCEL","onSheZhiTouchCancel","zdPaiNode","wdPaiNode","event","console","log","target","paiCom","paiData","getData","location","getLocation","length","pos","parent","convertToNodeSpaceAR","paiPos","position","rect","width","height","contains","aimCom","aimData","value","setNullInfo","setInfo","sortPaiData","tempData","isBB","setArrMyPai","btnCancel","find","btnOk","refreshMyPai","myPaiCom","arrPaiData","getMyPaiData","automaticPai","arrUpPaiData","getUpPaiData","setTypeCom","Type","preBtnTag","m","wdPaiCom","wdPaiData","zdPaiCom","zdPaiData","tdPaiCom","tdPaiData","btnIsView","audio","playSFX","startPos","bTouchPai","endPos","len","szPai","szPaiPos","getPositionY","setPositionY","quickSwing","tdPai","zdPai","wdPai","sortres","cancelWD","cancelZD","cancelTD","setUp","arrTemp","upPaiType","upPaiValue","j","MyPaiCom","MyPaiData","splice","bDel","temp","gap","sortPai2","getType","getpaitypesprite","getRealType","paiType","dunIndex","ST","WT","THS","HL","TZ","arrpai","index","paiTexiao","window","sssGame","wdpaidate","arrType","paiName","nodesprite","setContentSize","sanPaiIndex","PaiCom","PaiData","arr","sort","a","b","a1","a2","a3","a4","a5","addNum","tmp","arrs","concat","getIsSetInfo"],"mappings":"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","file":"touch.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\sss\\sssgame","sourcesContent":["var numSprites = [];\r\nvar PaiType = require(\"define\").PaiType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        shezhiPai:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        myPai:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        paiTypeShow:{\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n        _timeChild:null,\r\n        _gewei:null,\r\n        _shiwei:null,\r\n        _baiwei: null,\r\n        _tempHoldData:null,\r\n        numAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        // getType:{\r\n        //     type:cc.Node, \r\n        //     default:null\r\n        // },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        // this.addY = -60;\r\n        // this.norY = -110;\r\n        this.addY = -30;\r\n        this.norY = -80;\r\n        this.initSheZhi();\r\n        this.initMyPai();\r\n\r\n        this.arrUpPai = [];\r\n        this.TDIndex = 0;\r\n        this.ZDIndex = 0;\r\n        this.WDIndex = 0;\r\n        this.arrUpPaiIndex = [];\r\n        this.Compare = require(\"Compare\");\r\n        this._timeChild = this.node.getChildByName('time');\r\n        this._baiwei = this._timeChild.getChildByName(\"baiwei\");\r\n        this._shiwei = this._timeChild.getChildByName(\"shiwei\");\r\n        this._gewei = this._timeChild.getChildByName(\"gewei\");\r\n        this._curTurn = cc.sssNetMgr.turn;\r\n        this.bUpPai = true;      \r\n        \r\n        this.tdPaitype = this.paiTypeShow.getChildByName('tdType')\r\n        this.zdPaitype = this.paiTypeShow.getChildByName('zdType')\r\n        this.wdPaitype = this.paiTypeShow.getChildByName('wdType')\r\n        numSprites.push(\"mjks-0\");\r\n        numSprites.push(\"mjks-1\");\r\n        numSprites.push(\"mjks-2\");\r\n        numSprites.push(\"mjks-3\");\r\n        numSprites.push(\"mjks-4\");\r\n        numSprites.push(\"mjks-5\");\r\n        numSprites.push(\"mjks-6\");\r\n        numSprites.push(\"mjks-8\");\r\n        numSprites.push(\"mjks-7\");\r\n        numSprites.push(\"mjks-9\");\r\n    },\r\n\r\n    initHandler:function(){\r\n        \r\n    },\r\n\r\n    //设置倒计时\r\n    setCountdown:function(data){\r\n        var time = data;\r\n        var gewei = null;\r\n        var shiwei = null;\r\n        var baiwei = null;\r\n        var t = Math.ceil(time);\r\n        if(t >= 100){\r\n            baiwei = Math.floor(t / 100);\r\n            shiwei = Math.floor((t % 100) / 10);\r\n            gewei = t % 10 ;\r\n        }else \r\n        if (t >= 10) {\r\n            baiwei = 0\r\n            shiwei = Math.floor((t%100) / 10);\r\n            gewei = t % 10;\r\n        }\r\n        else{\r\n            baiwei = 0\r\n            shiwei = 0;\r\n            gewei = t % 10;\r\n        }\r\n\r\n        if (this._shiwei && this._gewei){\r\n            var spriteB = this._baiwei.getComponent(cc.Sprite);\r\n            var spriteS = this._shiwei.getComponent(cc.Sprite);\r\n            var spriteG = this._gewei.getComponent(cc.Sprite);\r\n            var spriteFrameB = this.numAtlas.getSpriteFrame(this.getNumSpriteByNum(baiwei));\r\n            var spriteFrameS = this.numAtlas.getSpriteFrame(this.getNumSpriteByNum(shiwei));\r\n            var spriteFrameG = this.numAtlas.getSpriteFrame(this.getNumSpriteByNum(gewei));\r\n            spriteB.spriteFrame = spriteFrameB;\r\n            spriteS.spriteFrame = spriteFrameS;\r\n            spriteG.spriteFrame = spriteFrameG;\r\n        }\r\n    },\r\n\r\n    reset:function(){\r\n        this.arrUpPai = [];\r\n        this.TDIndex = 0;\r\n        this.ZDIndex = 0;\r\n        this.WDIndex = 0;\r\n        this.arrUpPaiIndex = [];\r\n        this.tdPaitype = this.paiTypeShow.getChildByName('tdType')\r\n        this.zdPaitype = this.paiTypeShow.getChildByName('zdType')\r\n        this.wdPaitype = this.paiTypeShow.getChildByName('wdType')\r\n        this.tdPaitype.active = false;\r\n        this.zdPaitype.active = false;\r\n        this.wdPaitype.active = false;\r\n        this.setAllDown();\r\n    },\r\n    initMyPai:function(){\r\n        this.arrMyPai = [];\r\n        this.arrMyPaiPos = [];\r\n        var posX = -700;\r\n        for(var i = 1; i <= 13; i++){\r\n            var name = 'pai'+i;\r\n            var paiNode = this.myPai.getChildByName(name);\r\n            var paimask=paiNode.getChildByName(\"mask\")\r\n            paiNode.scale = 0.75;\r\n            paiNode.y = -80;\r\n            paiNode.x = posX + 90*i;\r\n            // paimask.scale = 0.9;\r\n            // paimask.y = -110;\r\n            // paimask.x = posX + 90 * i;\r\n            paimask.active=false;\r\n            this.arrMyPaiPos.push(paiNode.getPosition());\r\n            this.arrMyPai.push(paiNode);\r\n        }\r\n        this.addTouch();\r\n\r\n    },\r\n    initSheZhi:function(){\r\n        this.tdPaitype = this.paiTypeShow.getChildByName('tdType')\r\n        this.zdPaitype = this.paiTypeShow.getChildByName('zdType')\r\n        this.wdPaitype = this.paiTypeShow.getChildByName('wdType')\r\n        this.tdPaitype.active=false;\r\n        this.wdPaitype.active=false;\r\n        this.zdPaitype.active=false;\r\n        this.arrTDPai = [];\r\n        this.arrZDPai = [];\r\n        this.arrWDPai = [];\r\n        this.arrSheZhiPai = [];\r\n        var tdNode = this.shezhiPai.getChildByName('toudaoNode');\r\n        var zdNode = this.shezhiPai.getChildByName('zhongdaoNode');\r\n        var wdNode = this.shezhiPai.getChildByName('weidaoNode');\r\n        this.tempPaiNode = this.shezhiPai.getChildByName('tempPai');\r\n        this.tempPaiNode.active = false;\r\n        if (cc.sssNetMgr.wanfa === 2) {\r\n            var btnBaipai = this.shezhiPai.getChildByName('btn_Baipai');\r\n            btnBaipai.active = false;\r\n        }\r\n        for(var i = 1; i <= 3; i++){\r\n            var name = 'paiNode'+i;\r\n            var paiNode = tdNode.getChildByName(name);\r\n            var pai = paiNode.getChildByName('pai');\r\n            this.arrTDPai.push(pai);\r\n            this.arrSheZhiPai.push(paiNode);\r\n        }\r\n        for(var i = 1; i <= 5; i++){\r\n            var name = 'paiNode'+i;\r\n            var paiNode = zdNode.getChildByName(name);\r\n            var pai = paiNode.getChildByName('pai');\r\n            this.arrZDPai.push(pai);\r\n            this.arrSheZhiPai.push(paiNode);\r\n        }\r\n        for(var i = 1; i <= 5; i++){\r\n            var name = 'paiNode'+i;\r\n            var paiNode = wdNode.getChildByName(name);\r\n            var pai = paiNode.getChildByName('pai');\r\n            this.arrWDPai.push(pai);\r\n            this.arrSheZhiPai.push(paiNode);\r\n        }\r\n    },\r\n    addTouch:function(){\r\n        this.myPai.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.myPai.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.myPai.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n\r\n        var tdNode = this.shezhiPai.getChildByName('toudaoNode');\r\n        for(let i = 1;i <= 3;i++){\r\n            var tdPaiNode = tdNode.getChildByName('paiNode'+i);\r\n            tdPaiNode.tag = 0;\r\n            tdPaiNode.on(cc.Node.EventType.TOUCH_START, this.onSheZhiTouchStart, this);\r\n            tdPaiNode.on(cc.Node.EventType.TOUCH_MOVE, this.onSheZhiTouchMove, this);\r\n            tdPaiNode.on(cc.Node.EventType.TOUCH_END, this.onSheZhiTouchEnd, this);\r\n            tdPaiNode.on(cc.Node.EventType.TOUCH_CANCEL, this.onSheZhiTouchCancel, this);\r\n        }\r\n\r\n        var zdNode = this.shezhiPai.getChildByName('zhongdaoNode');\r\n        for(let i = 1;i <= 5;i++){\r\n            var zdPaiNode = zdNode.getChildByName('paiNode'+i);\r\n            zdPaiNode.tag = 1;\r\n            zdPaiNode.on(cc.Node.EventType.TOUCH_START, this.onSheZhiTouchStart, this);\r\n            zdPaiNode.on(cc.Node.EventType.TOUCH_MOVE, this.onSheZhiTouchMove, this);\r\n            zdPaiNode.on(cc.Node.EventType.TOUCH_END, this.onSheZhiTouchEnd, this);\r\n            zdPaiNode.on(cc.Node.EventType.TOUCH_CANCEL, this.onSheZhiTouchCancel, this);\r\n        }\r\n\r\n        var wdNode = this.shezhiPai.getChildByName('weidaoNode');\r\n        for(let i = 1;i <= 5;i++){\r\n            var wdPaiNode = wdNode.getChildByName('paiNode'+i);\r\n            wdPaiNode.tag = 2;\r\n            wdPaiNode.on(cc.Node.EventType.TOUCH_START, this.onSheZhiTouchStart, this);\r\n            wdPaiNode.on(cc.Node.EventType.TOUCH_MOVE, this.onSheZhiTouchMove, this);\r\n            wdPaiNode.on(cc.Node.EventType.TOUCH_END, this.onSheZhiTouchEnd, this);\r\n            wdPaiNode.on(cc.Node.EventType.TOUCH_CANCEL, this.onSheZhiTouchCancel, this);\r\n        }\r\n    },\r\n\r\n    onSheZhiTouchCancel:function(event){\r\n        console.log('onSheZhiTouchCancel');\r\n        var target = event.target;\r\n        var paiCom = target.getChildByName('pai').getComponent('pai');\r\n        var paiData = paiCom.getData();\r\n        var location = event.getLocation();\r\n        this.tempPaiNode.active = false;\r\n        \r\n        for(let i = 0;i < this.arrSheZhiPai.length;i++){\r\n            let paiNode = this.arrSheZhiPai[i];\r\n            var pos = paiNode.parent.convertToNodeSpaceAR(location);\r\n            let paiPos = paiNode.position;\r\n            let rect = new cc.rect(paiPos.x - paiNode.width/2, paiPos.y - paiNode.height/2, paiNode.width, paiNode.height);\r\n            if (rect.contains(pos)) {\r\n                console.log('rect.contains(pos) arrTDPai');\r\n                let aimCom = paiNode.getChildByName('pai').getComponent('pai');   \r\n                let aimData = aimCom.getData();\r\n                if(aimData.value === 1){    //代表牌是空的\r\n                    paiCom.setNullInfo();\r\n                    aimCom.setInfo(paiData);\r\n\r\n                    if(target.parent.name == 'toudaoNode'){\r\n                        this.TDIndex--;\r\n                    }\r\n                    else if(target.parent.name == 'zhongdaoNode'){\r\n                        this.ZDIndex--;\r\n                    }\r\n                    else if(target.parent.name == 'weidaoNode'){\r\n                        this.WDIndex--;\r\n                    }\r\n                    if(i < 3){\r\n                        this.TDIndex++;\r\n                    }\r\n                    else if(i < 8){\r\n                        this.ZDIndex++;\r\n                    }else if(i < 13){\r\n                        this.WDIndex++;\r\n                    }\r\n                    //重新排序\r\n                    if(this.arrTDPai.length === 3){\r\n                        this.sortPaiData(this.arrTDPai);\r\n                    }\r\n                    if(this.arrZDPai.length === 5){\r\n                        this.sortPaiData(this.arrZDPai);\r\n                    }\r\n                    if(this.arrWDPai.length === 5){\r\n                        this.sortPaiData(this.arrWDPai);\r\n                    }\r\n                }\r\n                else{\r\n                    let tempData = {};\r\n                    tempData.type = paiData.type;\r\n                    tempData.value = paiData.value;\r\n                    tempData.isBB = paiData.isBB;\r\n                    paiCom.setInfo(aimData);\r\n                    aimCom.setInfo(tempData);\r\n\r\n                    //重新排序\r\n                    \r\n                    if(this.arrTDPai.length === 3){\r\n                        this.sortPaiData(this.arrTDPai);\r\n                    }\r\n                    if(this.arrZDPai.length === 5){\r\n                        this.sortPaiData(this.arrZDPai);\r\n                    }\r\n                    if(this.arrWDPai.length === 5){\r\n                        this.sortPaiData(this.arrWDPai);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        // //牌放回手上\r\n        \r\n        if(paiData.value !== 1){\r\n            if(paiData.isBB){\r\n                this.setArrMyPai(paiData,false,true);\r\n            }\r\n            else{\r\n                this.setArrMyPai(paiData,false);\r\n            }\r\n            if(target.parent.name == 'toudaoNode'){\r\n                this.TDIndex--;\r\n            }\r\n            else if(target.parent.name == 'zhongdaoNode'){\r\n                this.ZDIndex--;\r\n            }\r\n            else if(target.parent.name == 'weidaoNode'){\r\n                this.WDIndex--;\r\n            }\r\n            var btnCancel = cc.find(\"Canvas/prepare/shezhipai/btn_Cancel\");\r\n            var btnOk = cc.find(\"Canvas/prepare/shezhipai/btn_Ok\");\r\n            btnCancel.active = false;\r\n            btnOk.active = false;\r\n            \r\n            paiCom.setNullInfo();\r\n            this.refreshMyPai();\r\n        }\r\n    },\r\n    onSheZhiTouchEnd:function(event){\r\n        console.log('onSheZhiTouchEnd');\r\n        this.tempPaiNode.active = false;\r\n        var btnCancel = cc.find(\"Canvas/prepare/shezhipai/btn_Cancel\");\r\n        var btnOk = cc.find(\"Canvas/prepare/shezhipai/btn_Ok\");\r\n        var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n        var arrPaiData = myPaiCom.getMyPaiData();\r\n        if(arrPaiData.length === 0){\r\n            btnCancel.active = true;\r\n            btnOk.active = true;\r\n            \r\n        }\r\n        var target = event.target;\r\n        var paiCom = target.getChildByName('pai').getComponent('pai');\r\n        var paiData = paiCom.getData();\r\n        if(this.bUpPai){\r\n            this.automaticPai();\r\n            \r\n        }\r\n        // //牌放回手上\r\n        if(paiData.value !== 1 && !this.bUpPai){\r\n            if(paiData.isBB){\r\n                this.setArrMyPai(paiData,false,true);\r\n            }\r\n            else{\r\n                this.setArrMyPai(paiData,false);\r\n            }\r\n            if(target.parent.name == 'toudaoNode'){\r\n                this.TDIndex--;\r\n            }\r\n            else if(target.parent.name == 'zhongdaoNode'){\r\n                this.ZDIndex--;\r\n            }\r\n            else if(target.parent.name == 'weidaoNode'){\r\n                this.WDIndex--;\r\n            }\r\n            var btnCancel = cc.find(\"Canvas/prepare/shezhipai/btn_Cancel\");\r\n            var btnOk = cc.find(\"Canvas/prepare/shezhipai/btn_Ok\");\r\n            btnCancel.active = false;\r\n            btnOk.active = false;\r\n            \r\n            paiCom.setNullInfo();\r\n            this.refreshMyPai();\r\n        }\r\n        \r\n        this.bUpPai = false;\r\n    },\r\n\r\n    onSheZhiTouchMove:function(event){\r\n        var target = event.target;\r\n        let location = event.getLocation();\r\n        let pos = this.shezhiPai.convertToNodeSpaceAR(location);\r\n        this.tempPaiNode.position  = pos;\r\n    },\r\n    onSheZhiTouchStart:function(event){\r\n        var target = event.target;\r\n        var arrUpPaiData = this.getUpPaiData();\r\n        if(arrUpPaiData.length < 1){    //牌的移动,百变先不做\r\n            var target = event.target;\r\n            var paiCom = target.getChildByName('pai').getComponent('pai');\r\n            var paiData = paiCom.getData();\r\n            if(paiData){\r\n                let location = event.getLocation();\r\n                let pos = this.shezhiPai.convertToNodeSpaceAR(location);\r\n                let paiCom = this.tempPaiNode.getComponent('pai');\r\n                paiCom.setInfo(paiData);\r\n                this.tempPaiNode.active = true;\r\n                this.tempPaiNode.position  = pos;\r\n            }\r\n        }\r\n        if(target.tag === 2){\r\n            console.log(\"touch weidaoNode\");\r\n            cc.log(this.WDIndex);\r\n            if(this.WDIndex > 4){\r\n                return;\r\n            }\r\n            var setTypeCom = this.node.getChildByName(\"setType\").getComponent(\"setType\");\r\n            var Type = setTypeCom.preBtnTag;\r\n            if(Type !== 0 && cc.sssNetMgr.wanfa === 2){ \r\n                //取点击的类型\r\n                var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n                var arrPaiData = myPaiCom.getMyPaiData();\r\n                setTypeCom.preBtnTag = 0;\r\n            }\r\n            for(var i = 0; i < arrUpPaiData.length; i++){\r\n                if(this.WDIndex > 4){\r\n                    break;\r\n                }\r\n                for(let m = 0;m<this.arrWDPai.length;m++){\r\n                    let Node = this.arrWDPai[m];\r\n                    let wdPaiCom = Node.getComponent('pai');\r\n                    let wdPaiData = wdPaiCom.getData();\r\n                    if(wdPaiData.value <= 1){\r\n                        var paiNode = this.arrWDPai[m];\r\n                        break;\r\n                    }\r\n                }\r\n                if(!paiNode){\r\n                    return;\r\n                }\r\n                var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n                var arrPaiData = myPaiCom.getMyPaiData();\r\n                var paiCom = paiNode.getComponent(\"pai\");\r\n                paiCom.setInfo(arrUpPaiData[i]);\r\n                this.setArrMyPai(arrUpPaiData[i],true);\r\n                this.WDIndex++;\r\n                this.bUpPai = true;\r\n            }\r\n        }\r\n        else if(target.tag === 1){\r\n            console.log(\"touch zhongdaoNode\");\r\n            if(this.ZDIndex > 4){\r\n                return;\r\n            }\r\n            var setTypeCom = this.node.getChildByName(\"setType\").getComponent(\"setType\");\r\n            var Type = setTypeCom.preBtnTag;\r\n            if(Type !== 0 && cc.sssNetMgr.wanfa === 2){ \r\n                //取点击的类型\r\n                var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n                var arrPaiData = myPaiCom.getMyPaiData();\r\n                setTypeCom.preBtnTag = 0;\r\n            }\r\n            for(var i = 0; i < arrUpPaiData.length; i++){\r\n                if(this.ZDIndex > 4){\r\n                    break;\r\n                }\r\n\r\n                for(let m = 0;m<this.arrZDPai.length;m++){\r\n                    let Node = this.arrZDPai[m];\r\n                    let zdPaiCom = Node.getComponent('pai');\r\n                    let zdPaiData = zdPaiCom.getData();\r\n                    if(zdPaiData.value <= 1){\r\n                        var paiNode = this.arrZDPai[m];\r\n                        break;\r\n                    }\r\n                }\r\n                if(!paiNode){\r\n                    return;\r\n                }\r\n                var paiCom = paiNode.getComponent(\"pai\");\r\n                paiCom.setInfo(arrUpPaiData[i]);\r\n                this.setArrMyPai(arrUpPaiData[i],true);\r\n                this.ZDIndex++;\r\n                this.bUpPai = true;\r\n            }\r\n        }\r\n        else if(target.tag === 0){\r\n            console.log(\"touch toudaoNode\");\r\n            if(this.TDIndex > 2){\r\n                return;\r\n            }\r\n            var setTypeCom = this.node.getChildByName(\"setType\").getComponent(\"setType\");\r\n            var Type = setTypeCom.preBtnTag;\r\n            if(Type !== 0 && cc.sssNetMgr.wanfa === 2){ \r\n                //取点击的类型\r\n                var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n                var arrPaiData = myPaiCom.getMyPaiData();\r\n                setTypeCom.preBtnTag = 0;\r\n            }\r\n            for(var i = 0; i < arrUpPaiData.length; i++){\r\n                if(this.TDIndex > 2){\r\n                    break;\r\n                }\r\n                \r\n                for(let m = 0;m<this.arrTDPai.length;m++){\r\n                    let Node = this.arrTDPai[m];\r\n                    let tdPaiCom = Node.getComponent('pai');\r\n                    let tdPaiData = tdPaiCom.getData();\r\n                    if(tdPaiData.value <= 1){\r\n                        var paiNode = this.arrTDPai[m];\r\n                        break;\r\n                    }\r\n                }\r\n                if(!paiNode){\r\n                    return;\r\n                }\r\n                var paiCom = paiNode.getComponent(\"pai\");\r\n                paiCom.setInfo(arrUpPaiData[i]);\r\n                this.setArrMyPai(arrUpPaiData[i],true);\r\n                this.TDIndex++;\r\n                this.bUpPai = true;\r\n            }\r\n        }\r\n        this.refreshMyPai();\r\n\r\n        var btnIsView = false;\r\n        var btnCancel = this.shezhiPai.getChildByName(\"btn_Cancel\");\r\n        var btnOk = this.shezhiPai.getChildByName(\"btn_Ok\");\r\n        for(var i = 1; i < 14; i++){\r\n            var name = 'pai'+i;\r\n            var paiNode = this.myPai.getChildByName(name);\r\n            if(paiNode.active){\r\n                break;\r\n            }else{\r\n                btnIsView = true;\r\n                break;\r\n            }\r\n        }\r\n        btnCancel.active = btnIsView;\r\n        btnOk.active = btnIsView;\r\n        cc.audio.playSFX(\"sssMusic/fangpai.mp3\");\r\n    },\r\n    onTouchStart:function(event){\r\n        var setTypeCom = this.node.getChildByName(\"setType\").getComponent(\"setType\");\r\n        setTypeCom.preBtnTag = 0;\r\n        var location = event.getLocation();\r\n        this.startPos = location;\r\n        if(this.startPos.y > 150){\r\n            this.bTouchPai = false;\r\n            // this.setAllDown();\r\n        }\r\n        else{\r\n            this.bTouchPai = true;\r\n        }\r\n    },\r\n    onTouchMove:function(event){\r\n        var target = event.target;\r\n         var location = event.getLocation();\r\n        this.endPos = location;\r\n        var len = this.arrMyPai.length;\r\n        for (var i = 0; i < len; i++) {\r\n            var szPai = this.arrMyPai[i];\r\n            var szPaiPos = szPai.getPosition();\r\n            var startPos = this.myPai.convertToNodeSpaceAR(this.startPos);\r\n            var endPos = this.myPai.convertToNodeSpaceAR(this.endPos);\r\n            var rect = new cc.rect(szPaiPos.x, szPaiPos.y, szPai.width * 0.65, szPai.height * 0.9);\r\n            if (rect.contains(startPos) || rect.contains(endPos)) {\r\n                this.arrMyPai[i].getChildByName(\"mask\").active=true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (var i = 0; i < len; i++) {\r\n            var szPai = this.arrMyPai[i];\r\n            var startPos = this.myPai.convertToNodeSpaceAR(this.startPos);\r\n            var endPos = this.myPai.convertToNodeSpaceAR(this.endPos);\r\n            if ((this.arrMyPaiPos[i].x > startPos.x && this.arrMyPaiPos[i].x < endPos.x)\r\n                || (this.arrMyPaiPos[i].x < startPos.x && this.arrMyPaiPos[i].x > endPos.x)) {\r\n                this.arrMyPai[i].getChildByName(\"mask\").active = true;\r\n            }\r\n        }\r\n    },\r\n    onTouchEnd:function(event){\r\n        var target = event.target;\r\n        var location = event.getLocation();\r\n        this.endPos = location;\r\n        var len = this.arrMyPai.length;\r\n\r\n        //单独处理滑动的第一张牌和最后一张\r\n        for(var i = 0; i < len; i++){\r\n            var szPai = this.arrMyPai[i];\r\n            var szPaiPos = szPai.getPosition();\r\n            var startPos = this.myPai.convertToNodeSpaceAR(this.startPos);\r\n            var endPos = this.myPai.convertToNodeSpaceAR(this.endPos);\r\n            var rect = new cc.rect(szPaiPos.x, szPaiPos.y, szPai.width*0.65, szPai.height*0.9);\r\n            if (rect.contains(startPos) || rect.contains(endPos)) {\r\n                // cc.log(i)\r\n                // cc.log(\"##########\")\r\n                this.arrMyPai[i].getChildByName(\"mask\").active = false;\r\n\r\n                if (this.arrMyPai[i].getPositionY() <= this.norY){\r\n                    this.arrMyPai[i].setPositionY(this.addY);\r\n                    cc.audio.playSFX(\"sssMusic/fangpai.mp3\");\r\n                }\r\n                else{\r\n                    this.arrMyPai[i].setPositionY(this.norY);\r\n                    cc.audio.playSFX(\"sssMusic/fangpai.mp3\");\r\n                }\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (var i = 0; i < len; i++) {\r\n            var szPai = this.arrMyPai[i];\r\n            var startPos = this.myPai.convertToNodeSpaceAR(this.startPos);\r\n            var endPos = this.myPai.convertToNodeSpaceAR(this.endPos);\r\n            if ((this.arrMyPaiPos[i].x > startPos.x && this.arrMyPaiPos[i].x < endPos.x)\r\n                ||(this.arrMyPaiPos[i].x < startPos.x && this.arrMyPaiPos[i].x > endPos.x)) {\r\n \r\n                // cc.log(i)\r\n                this.arrMyPai[i].getChildByName(\"mask\").active = false;\r\n                if (this.arrMyPai[i].getPositionY() <= this.norY) {\r\n                    this.arrMyPai[i].setPositionY(this.addY);\r\n                    cc.audio.playSFX(\"sssMusic/fangpai.mp3\");\r\n                }\r\n                else{\r\n                    this.arrMyPai[i].setPositionY(this.norY);\r\n                    cc.audio.playSFX(\"sssMusic/fangpai.mp3\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n    quickSwing:function(data){\r\n        this._tempHoldData = data;\r\n        var tdPai = data[0];\r\n        var zdPai = data[1];\r\n        var wdPai = data[2];\r\n\r\n        // wdPai.sort(function (a, b) { return (b.value - a.value); })\r\n        // zdPai.sort(function (a, b) { return (b.value - a.value); })\r\n        // tdPai.sort(function (a, b) { return (b.value - a.value); })\r\n        wdPai=this.sortres(wdPai);\r\n        zdPai=this.sortres(zdPai);\r\n        tdPai=this.sortres(tdPai);\r\n        // wdPai.sort(function(a,b){return (b.value-a.value);})\r\n        // zdPai.sort(function(a,b){return (b.value-a.value);})\r\n        // tdPai.sort(function(a,b){return (b.value-a.value);})\r\n\r\n        this.cancelWD();\r\n        this.cancelZD();\r\n        this.cancelTD();\r\n        for(var i = 0; i < wdPai.length; i++){\r\n            if(this.WDIndex > 4){\r\n                break;\r\n            }\r\n            var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n            var arrPaiData = myPaiCom.getMyPaiData();\r\n            var paiNode = this.arrWDPai[this.WDIndex];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            paiCom.setInfo(wdPai[i]);\r\n            this.setArrMyPai(wdPai[i],true);\r\n            this.WDIndex++;\r\n        }\r\n        for(var i = 0; i < zdPai.length; i++){\r\n            if(this.ZDIndex > 4){\r\n                break;\r\n            }\r\n            var paiNode = this.arrZDPai[this.ZDIndex];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            paiCom.setInfo(zdPai[i]);\r\n            this.setArrMyPai(zdPai[i],true);\r\n            this.ZDIndex++;\r\n        }\r\n        for(var i = 0; i < tdPai.length; i++){\r\n            if(this.TDIndex > 2){\r\n                break;\r\n            }\r\n            var paiNode = this.arrTDPai[this.TDIndex];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            paiCom.setInfo(tdPai[i]);\r\n            this.setArrMyPai(tdPai[i],true);\r\n            this.TDIndex++;\r\n        }\r\n        \r\n        this.refreshMyPai();\r\n\r\n        var btnIsView = false;\r\n        var btnCancel = this.shezhiPai.getChildByName(\"btn_Cancel\");\r\n        var btnOk = this.shezhiPai.getChildByName(\"btn_Ok\");\r\n        for(var i = 1; i < 14; i++){\r\n            var name = 'pai'+i;\r\n            var paiNode = this.myPai.getChildByName(name);\r\n            if(paiNode.active){\r\n                break;\r\n            }else{\r\n                btnIsView = true;\r\n                break;\r\n            }\r\n        }\r\n        btnCancel.active = btnIsView;\r\n        btnOk.active = btnIsView;\r\n        this.bUpPai = false;\r\n    },\r\n    \r\n    setAllDown:function(){\r\n        if(this.arrMyPai){\r\n            for(var i = 0;i < this.arrMyPai.length;i++){\r\n                this.arrMyPai[i].setPositionY(this.norY);\r\n            }\r\n        }\r\n    },\r\n\r\n    setUp:function(arrUpPai){\r\n        this.setAllDown();\r\n        var arrTemp = [];\r\n        for(var i = 0;i < this.arrMyPai.length; i++){\r\n            arrTemp.push(this.arrMyPai[i]);\r\n        }\r\n        for(var i = 0;i < arrUpPai.length; i++){\r\n            var upPaiType = arrUpPai[i].type;\r\n            var upPaiValue = arrUpPai[i].value;\r\n            for(var j = 0;j < arrTemp.length;j++){\r\n                var MyPaiCom = arrTemp[j].getComponent(\"pai\");\r\n                var MyPaiData = MyPaiCom.getData();\r\n                if(MyPaiData.type === upPaiType && MyPaiData.value === upPaiValue){\r\n                    arrTemp[j].setPositionY(this.addY);\r\n                    arrTemp.splice(j,1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    getUpPaiData:function(){\r\n        this.arrUpPai = [];\r\n        this.arrUpPaiIndex = [];\r\n        for(var i = 0;i < this.arrMyPai.length;i++){\r\n            var MyPaiCom = this.arrMyPai[i].getComponent(\"pai\");\r\n            var MyPaiData = MyPaiCom.getData();\r\n            if(this.arrMyPai[i].y === this.addY && this.arrMyPai[i].active == true){\r\n                this.arrUpPai.push(MyPaiData);\r\n                this.arrUpPaiIndex.push(i);\r\n            }\r\n        }\r\n        return this.arrUpPai;\r\n    },\r\n\r\n    //自己手牌的删除和增加\r\n    setArrMyPai:function(pai,bDel){\r\n        if(pai.value === 1){\r\n            console.log('setArrMyPai pai.value === 1');\r\n            return;\r\n        }\r\n        var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n        var arrPaiData = myPaiCom.getMyPaiData();\r\n        if(bDel){\r\n            for(var i = 0;i < arrPaiData.length;i++){\r\n                var MyPaiData = arrPaiData[i];\r\n                if(MyPaiData.type === pai.type && MyPaiData.value === pai.value){\r\n                    arrPaiData.splice(i,1);\r\n                    return;\r\n                }\r\n            }\r\n            console.log(\"not find can splice\");\r\n            console.log(\"pai:  \"+ pai);\r\n        }\r\n        else{\r\n            console.log(\"push:\"+pai.value);\r\n            var temp = {};\r\n            temp.type = pai.type;\r\n            temp.value = pai.value;\r\n            arrPaiData.push(temp);\r\n        }\r\n    },\r\n\r\n    //刷新自己手牌、排序、刷新提示按钮、显示百变牌\r\n    refreshMyPai:function(){\r\n        console.log(\"refreshMyPai\");\r\n        var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n        var arrPaiData = myPaiCom.getMyPaiData();\r\n        var gap = 13 - arrPaiData.length;\r\n        //排序\r\n        myPaiCom.sortPai2(arrPaiData);\r\n        //刷新自己手牌\r\n        for(var i = 0;i < arrPaiData.length; i++){\r\n            this.arrMyPai[i].getComponent(\"pai\").setInfo(arrPaiData[i]);\r\n            this.arrMyPai[i].active = true;\r\n        }\r\n        for(var i = 0;i < gap;i++){\r\n            this.arrMyPai[i + arrPaiData.length].getComponent(\"pai\").setNullInfo();\r\n            this.arrMyPai[i + arrPaiData.length].active = false;\r\n        }\r\n        this.setAllDown();\r\n\r\n        //刷新提示类型\r\n        var setTypeCom = this.node.getChildByName(\"setType\").getComponent(\"setType\");\r\n        setTypeCom.getType();\r\n\r\n        // 显示设置牌牌型\r\n        if (this.TDIndex>2) {\r\n            this.getpaitypesprite(this.arrTDPai, this.tdPaitype, 0);\r\n            this.tdPaitype.active = true;\r\n        }else{\r\n            this.tdPaitype.active = false;\r\n        }\r\n        if (this.ZDIndex> 4) {\r\n            this.getpaitypesprite(this.arrZDPai, this.zdPaitype, 1);\r\n            this.zdPaitype.active = true;\r\n        }else{\r\n            this.zdPaitype.active = false;\r\n        }\r\n        if (this.WDIndex>4) {\r\n            this.getpaitypesprite(this.arrWDPai, this.wdPaitype, 2);\r\n            this.wdPaitype.active = true;\r\n        }else{\r\n            this.wdPaitype.active = false;\r\n        }\r\n        console.log(\"refreshMyPai over\");\r\n    },\r\n    getRealType: function (paiType, dunIndex) {\r\n        switch (dunIndex) {\r\n            case 0: //头道\r\n                if (paiType === PaiType.ST) {\r\n                    paiType = 14;\r\n                }\r\n                break;\r\n            case 1: //中道\r\n                if (paiType === PaiType.WT) {\r\n                    paiType = 12;\r\n                }\r\n                else if (paiType === PaiType.THS) {\r\n                    paiType = 13;\r\n                }\r\n                else if (paiType === PaiType.HL) {\r\n                    paiType = 15;\r\n                }\r\n                else if (paiType === PaiType.TZ) {\r\n                    paiType = 16;\r\n                }\r\n                break;\r\n            case 2: //尾道\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return paiType;\r\n    },\r\n    getpaitypesprite:function(arrpai,node,index){\r\n        var paiTexiao = window.sssGame.paiTexiao;\r\n        let wdpaidate=[]\r\n        for(var i = 0; i < arrpai.length; i++){\r\n            var paiNode = arrpai[i];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            var paiData = paiCom.getData();\r\n            wdpaidate.push(paiData);\r\n        }\r\n        var arrType = [];\r\n        arrType = this.Compare.getType(wdpaidate);\r\n        cc.log(arrType[0])\r\n        var paiType = this.getRealType(arrType[0], index);\r\n        var paiName = \"texiao_\" + paiType;\r\n        var spriteFrame = paiTexiao.getSpriteFrame(paiName);\r\n        var nodesprite = node.getComponent(cc.Sprite);\r\n        if (paiType >10 || paiType ==9) {\r\n            node.setContentSize(110, 35);\r\n        }else{\r\n            node.setContentSize(55, 35);\r\n        }\r\n        nodesprite.spriteFrame = spriteFrame;\r\n    },\r\n    automaticPai:function(){\r\n        var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n        var arrPaiData = myPaiCom.getMyPaiData();\r\n        if(arrPaiData.length <= 5 && arrPaiData.length > 0){\r\n            var sanPaiIndex = 0;\r\n\r\n            for(var i = 0; i < this.arrWDPai.length; i++){\r\n                if(this.WDIndex > 4){\r\n                    break;\r\n                }\r\n                var paiNode = this.arrWDPai[i];\r\n                var paiCom = paiNode.getComponent(\"pai\");\r\n                var paiData = paiCom.getData();\r\n                if(paiData.value <= 1){     //代表牌为空\r\n                    paiData.value = arrPaiData[sanPaiIndex].value;\r\n                    paiData.type = arrPaiData[sanPaiIndex].type;\r\n                    paiData.isBB = arrPaiData[sanPaiIndex].isBB;\r\n                    paiCom.setInfo(paiData);\r\n                    this.WDIndex++;\r\n                    sanPaiIndex++;\r\n                }\r\n            }\r\n            for(var i = 0; i < this.arrZDPai.length; i++){\r\n                if(this.ZDIndex > 4){\r\n                    break;\r\n                }\r\n                var paiNode = this.arrZDPai[i];\r\n                var paiCom = paiNode.getComponent(\"pai\");\r\n                var paiData = paiCom.getData();\r\n                if(paiData.value <= 1){     //代表牌为空\r\n                    paiData.value = arrPaiData[sanPaiIndex].value;\r\n                    paiData.type = arrPaiData[sanPaiIndex].type;\r\n                    paiData.isBB = arrPaiData[sanPaiIndex].isBB;\r\n                    paiCom.setInfo(paiData);\r\n                    this.ZDIndex++;\r\n                    sanPaiIndex++;\r\n                }\r\n            }\r\n            for(var i = 0; i < this.arrTDPai.length; i++){\r\n                if(this.TDIndex > 2){\r\n                    break;\r\n                }\r\n                var paiNode = this.arrTDPai[i];\r\n                var paiCom = paiNode.getComponent(\"pai\");\r\n                var paiData = paiCom.getData();\r\n                if(paiData.value <= 1){     //代表牌为空\r\n                    paiData.value = arrPaiData[sanPaiIndex].value;\r\n                    paiData.type = arrPaiData[sanPaiIndex].type;\r\n                    paiData.isBB = arrPaiData[sanPaiIndex].isBB;\r\n                    paiCom.setInfo(paiData);\r\n                    this.TDIndex++;\r\n                    sanPaiIndex++;\r\n                }\r\n            }\r\n            for(var i = 0;i < 5; i++){\r\n                if(arrPaiData[0]){\r\n                    this.setArrMyPai(arrPaiData[0],true);\r\n                }\r\n            }\r\n            //重新排序\r\n            if(this.arrTDPai.length === 3){\r\n                this.sortPaiData(this.arrTDPai);\r\n            }\r\n            if(this.arrZDPai.length === 5){\r\n                this.sortPaiData(this.arrZDPai);\r\n            }\r\n            if(this.arrWDPai.length === 5){\r\n                this.sortPaiData(this.arrWDPai);\r\n            }\r\n\r\n            this.refreshMyPai();\r\n            var btnCancel = cc.find(\"Canvas/prepare/shezhipai/btn_Cancel\");\r\n            var btnOk = cc.find(\"Canvas/prepare/shezhipai/btn_Ok\");\r\n            var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n            var arrPaiData = myPaiCom.getMyPaiData();\r\n            if(arrPaiData.length === 0){\r\n                btnCancel.active = true;\r\n                btnOk.active = true;\r\n            }\r\n        }\r\n    },\r\n    sortPaiData: function (arrpai) {  //取牌数据\r\n        var arrPaiData = [];\r\n        for (let m = 0; m < arrpai.length; m++) {\r\n            let Node = arrpai[m];\r\n            let PaiCom = Node.getComponent('pai');\r\n            let PaiData = PaiCom.getData();\r\n            let tempData = {};\r\n            tempData.value = PaiData.value;\r\n            tempData.type = PaiData.type;\r\n            tempData.isBB = PaiData.isBB;\r\n            arrPaiData.push(tempData);\r\n        }\r\n        arrPaiData=this.sortres(arrPaiData);\r\n        // cc.log(arrPaiData);\r\n\r\n        // var myPaiCom = this.myPai.getComponent(\"myPai\");\r\n        // myPaiCom.sortPai(arrPaiData);\r\n\r\n\r\n\r\n        //刷新自己手牌\r\n        for (var i = 0; i < arrPaiData.length; i++) {\r\n            arrpai[i].getComponent(\"pai\").setInfo(arrPaiData[i]);\r\n        }\r\n    },\r\n    sortres: function (arr) {\r\n        arr.sort(function (a, b) { return b.value - a.value; })\r\n        var a1 = [], a2 = [], a3 = [], a4 = [], a5 = [];\r\n\r\n        function addNum(value, index) {\r\n            if (index == 0) {\r\n                a1.push(value);\r\n            }\r\n            else if (index == 1) {\r\n                a2.push(value);\r\n            }\r\n            else if (index == 2) {\r\n                a3.push(value);\r\n            }\r\n            else if (index == 3) {\r\n                a4.push(value);\r\n            }\r\n            else if (index == 4) {\r\n                a5.push(value);\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }\r\n\r\n        var tmp = [];\r\n        var len = arr.length;\r\n        var index = 0;\r\n        for (var i = 0; i < len; i++) {\r\n            addNum(arr[i], i);\r\n            index = 0;\r\n            for (var j = i + 1; j < len; j++) {\r\n                if (arr[i].value == arr[j].value) {\r\n                    addNum(arr[j], i);\r\n                    index++;\r\n                }\r\n            }\r\n            i = i + index;\r\n        }\r\n        var arrs = [a1, a2, a3, a4, a5];\r\n        arrs.sort(function (a, b) { return b.length - a.length })\r\n        for (var x = 0; x < arrs.length; x++) {\r\n            tmp = tmp.concat(arrs[x])\r\n        }\r\n        return tmp;\r\n    },\r\n    //取消尾道牌\r\n    cancelWD:function(){\r\n        console.log(\"cancelWD\");\r\n        for(var i = 4; i >= 0;i--){\r\n            var paiNode = this.arrWDPai[i];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            if(!paiCom.getIsSetInfo()){\r\n                continue;\r\n            }\r\n            var data = paiCom.getData();\r\n            if(data.isBB){\r\n                this.setArrMyPai(data,false,true);\r\n            }\r\n            else{\r\n                this.setArrMyPai(data,false);\r\n            }\r\n            paiCom.setNullInfo();\r\n        }\r\n        this.WDIndex = 0;\r\n        this.refreshMyPai();\r\n    },\r\n\r\n    //取消中道牌\r\n    cancelZD:function(){\r\n        console.log(\"cancelZD\");\r\n        for(var i = 4; i >= 0;i--){\r\n            var paiNode = this.arrZDPai[i];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            if(!paiCom.getIsSetInfo()){\r\n                continue;\r\n            }\r\n            var data = paiCom.getData();\r\n            if(data.isBB){\r\n                this.setArrMyPai(data,false,true);\r\n            }\r\n            else{\r\n                this.setArrMyPai(data,false);\r\n            }\r\n            paiCom.setNullInfo();\r\n        }\r\n        this.ZDIndex = 0;\r\n        this.refreshMyPai();\r\n    },\r\n\r\n    //取消头道牌\r\n    cancelTD:function(){\r\n        console.log(\"cancelTD\");\r\n        for(var i = 2; i >= 0;i--){\r\n            var paiNode = this.arrTDPai[i];\r\n            var paiCom = paiNode.getComponent(\"pai\");\r\n            if(!paiCom.getIsSetInfo()){\r\n                continue;\r\n            }\r\n            var data = paiCom.getData();\r\n            if(data.isBB){\r\n                this.setArrMyPai(data,false,true);\r\n            }\r\n            else{\r\n                this.setArrMyPai(data,false);\r\n            }\r\n            paiCom.setNullInfo();\r\n        }\r\n        this.TDIndex = 0;\r\n        this.refreshMyPai();\r\n    },\r\n\r\n    getNumSpriteByNum:function(data){\r\n        for (var i = 0; i < 10; i++) {\r\n            if (data === i) {\r\n                return numSprites[i];\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}
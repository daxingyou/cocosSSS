{"version":3,"sources":["Hall.js"],"names":["ScenePopWin","require","cc","Class","extends","properties","btn_create_room","Node","btn_back_room","hongdian_normal_club","hongdian_integral_club","_onLoad","mj","user","director","loadScene","audio","playBGM","initEvt","recoverGame","Task","onTask","mjroom","mjroomStatus","gainUnhandledReqs","active","http","sendHall","method","i","resp","items","length","item","club_type","num","updateCreateRoomBtn","recoverChecked","mgr","recover","scene","gotoGame","onClickClub","e","onCreateSSSRoom","self","onCreate","ret","console","log","errcode","onShowTips","sssNetMgr","connectGameServer","conf","data","uid","club_id","sssHttp","sendRequest","onJoinSSSRoom","gametype","showPrefab","onShare","onBackRoom","sendGame","errno","detail","msgs","msg","evt","newEvt","tryJoinRoom","mjroom_id","content","onShowCreateRoom","onClickShowTips","type","TEXT","onShowAgent","onShowPlayMode","onShowJoinRoom","onShowGameHistory","replay","status","share","text","game_cfg","url_android","url_ios","share_plugin","anysdk","agentManager","getSharePlugin","setListener","onShareResult","info","shareTo","mediaType","title","code","ShareResultCode","kShareSuccess","kShareFail","kShareCancel","kShareNetworkError","regTickEvt","node","getComponent","init","startHallTick","onOpenSetting"],"mappings":"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","file":"Hall.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\hall","sourcesContent":["var ScenePopWin = require('../lib/ScenePopWin')\r\ncc.Class({\r\n    extends: ScenePopWin,\r\n\r\n    properties: {\r\n        btn_create_room: cc.Node,\r\n        btn_back_room: cc.Node,\r\n        hongdian_normal_club: cc.Node,\r\n        hongdian_integral_club: cc.Node,\r\n    },\r\n    _onLoad: function () {\r\n        if (!cc.mj || !cc.mj.user) {\r\n            cc.director.loadScene(\"login\");\r\n            return\r\n        }\r\n        cc.audio.playBGM(\"bgm1.mp3\")\r\n        this.initEvt()\r\n        this.recoverGame()\r\n\r\n        Task.onTask(1000, () => { cc.mjroom && this.mjroomStatus() })\r\n        Task.onTask(5000, () => { this.gainUnhandledReqs() })\r\n    },\r\n    gainUnhandledReqs: function () {\r\n        this.hongdian_normal_club.active = false\r\n        this.hongdian_integral_club.active = false\r\n        http.sendHall({ method: \"unhandled.reqs\" }, resp => {\r\n            for (let i = 0; i < resp.items.length; i++) {\r\n                let item = resp.items[i]\r\n                if (item.club_type == \"INTEGRAL_CLUB\" && item.num > 0) {\r\n                    this.hongdian_integral_club.active = true\r\n                }\r\n                if (item.club_type == \"NORMAL_CLUB\" && item.num > 0) {\r\n                    this.hongdian_normal_club.active = true\r\n                }\r\n            }\r\n        })\r\n    },\r\n    updateCreateRoomBtn: function () {\r\n        this.btn_create_room.active = cc.mjroom ? false : true\r\n        this.btn_back_room.active = cc.mjroom ? true : false\r\n    },\r\n    recoverGame: function () {\r\n        this.updateCreateRoomBtn()\r\n        if (cc.recoverChecked) {\r\n            return\r\n        }\r\n        http.recoverGame(() => {\r\n            this.updateCreateRoomBtn()\r\n            if (cc.mj.mgr.recover) {\r\n                cc.scene.gotoGame(\"正在恢复牌局\")\r\n            }\r\n        })\r\n        cc.recoverChecked = true\r\n    },\r\n    onClickClub: function (e, club_type) {\r\n        cc.club_type = club_type\r\n        club_type == \"INTEGRAL_CLUB\" ? this.hongdian_integral_club.active = false : this.hongdian_normal_club.active = false\r\n        cc.director.loadScene(\"club\")\r\n    },\r\n    onCreateSSSRoom: function () {\r\n        var self = this;\r\n        var onCreate = function (ret) {\r\n            console.log(ret)\r\n            if (ret.errcode !== 0) {\r\n                if (ret.errcode == 2222) {\r\n                    cc.scene.onShowTips(\"OK\", \"钻石不足，创建房间失败!\");\r\n                }\r\n                else {\r\n                    cc.scene.onShowTips(\"OK\", \"创建房间失败,错误码:\" + ret.errcode);\r\n                }\r\n            }\r\n            else {\r\n                cc.sssNetMgr.connectGameServer(ret);\r\n            }\r\n        };\r\n\r\n        let conf = {}\r\n        var data = {\r\n            uid: cc.mj.user.uid,\r\n            club_id: 0,\r\n        };\r\n        console.log(data);\r\n        cc.sssHttp.sendRequest(\"/create_private_room\", data, onCreate);\r\n\r\n    },\r\n    onJoinSSSRoom: function () {\r\n        cc.gametype = 'SSS'\r\n        cc.scene.showPrefab(\"加入房间\")\r\n    },\r\n    onShare: function () {\r\n\r\n    },\r\n    onBackRoom: function () {\r\n        http.sendGame({ method: \"recover_game\" }, (resp) => {\r\n            if (!resp.errno) {\r\n                cc.mjroom = resp.detail\r\n                for (let i = 0; i < resp.msgs.length; i++) {\r\n                    let msg = resp.msgs[i]\r\n                    cc.mj.evt.newEvt(msg)\r\n                }\r\n                cc.mj.mgr.recover = true\r\n                cc.director.loadScene(\"mjgame\");\r\n            } else {\r\n                http.tryJoinRoom(cc.mjroom_id, (resp) => {\r\n                    if (resp.errno) {\r\n                        let content = resp.errno == 20002 ? \"房间满员，无法加入房间\" : \"积分不足，无法加入积分圈房间\"\r\n                        cc.scene.onShowTips(\"OK\", content)\r\n                    } else {\r\n                        cc.scene.gotoGame(\"正在恢复牌局\")\r\n                        // cc.director.loadScene(\"mjgame\")\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    onShowCreateRoom: function () {\r\n        cc.scene.showPrefab(\"创建房间\")\r\n    },\r\n    onClickShowTips: function (e, type) {\r\n        cc.scene.onShowTips(\"OK\", TEXT[type])\r\n    },\r\n    onShowAgent: function () {\r\n        cc.scene.showPrefab(\"代理申请\")\r\n    },\r\n    onShowPlayMode: function () {\r\n        cc.scene.showPrefab(\"玩法介绍\")\r\n    },\r\n    onShowJoinRoom: function () {\r\n        cc.scene.showPrefab(\"加入房间\")\r\n    },\r\n    onShowGameHistory: function () {\r\n        cc.scene.showPrefab(\"战绩\")\r\n    },\r\n    mjroomStatus: function () {\r\n        if (cc.mj.mgr.replay) return\r\n        http.sendGame({ method: \"mjroom_status\" }, (resp) => {\r\n            if (resp.status) {\r\n                http.sendGame({ method: \"recover_game\" }, (resp) => {\r\n                    if (!resp.errno) {\r\n                        cc.mjroom = resp.detail\r\n                        for (let i = 0; i < resp.msgs.length; i++) {\r\n                            let msg = resp.msgs[i]\r\n                            cc.mj.evt.newEvt(msg)\r\n                        }\r\n                        cc.mj.mgr.recover = true\r\n                        cc.director.loadScene(\"mjgame\");\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    share: function () {\r\n        let text = \"福宁娱乐邀请您一起体验福建本地玩法的娱乐游戏，玩法简单刺激，朋友对战PK，快来体验！\"\r\n        text += \"安卓手机点击：\" + cc.mj.game_cfg.url_android + \"，\"\r\n        text += \"苹果手机点击：\" + cc.mj.game_cfg.url_ios\r\n        cc.log(text)\r\n\r\n        var share_plugin = anysdk.agentManager.getSharePlugin();\r\n        share_plugin.setListener(this.onShareResult, this);\r\n\r\n        var info = {\r\n            shareTo: \"0\",\r\n            mediaType: \"0\",\r\n            title: \"福宁娱乐\",   // title 标题，印象笔记、邮箱、信息、微信、人人网和 QQ 空间使用\r\n            text: text,            // text 是分享文本，所有平台都需要这个字段\r\n        }\r\n        share_plugin.share(info)\r\n    },\r\n    onShareResult: function () {\r\n        switch (code) {\r\n            case anysdk.ShareResultCode.kShareSuccess:\r\n                //do something\r\n                break;\r\n            case anysdk.ShareResultCode.kShareFail:\r\n                //do something\r\n                break;\r\n            case anysdk.ShareResultCode.kShareCancel:\r\n                //do something\r\n                break;\r\n            case anysdk.ShareResultCode.kShareNetworkError:\r\n                //do something\r\n                break;\r\n        }\r\n    },\r\n\r\n    initEvt: function () {\r\n        cc.mj.evt.regTickEvt(\"RoomInvite\", (data) => {\r\n            cc.scene.showPrefab(\"牌局邀请\", true, (node) => {\r\n                node.getComponent(\"InviteMsg\").init(data)\r\n            })\r\n        })\r\n        cc.mj.evt.regTickEvt(\"JoinClub\", (data) => {\r\n            cc.scene.onShowTips(\"OK\", data.content)\r\n        })\r\n\r\n        cc.mj.evt.regTickEvt(\"ExitClub\", (data) => {\r\n            cc.scene.onShowTips(\"OK\", data.content)\r\n        })\r\n        http.startHallTick()\r\n    },\r\n    onOpenSetting: function () {\r\n        cc.scene.showPrefab(\"设置\", (node) => {\r\n            node.getComponent(\"Setting\").init(\"HALL\")\r\n        })\r\n    },\r\n    // showPrefab: function (name, cb) {\r\n    //     cc.loader.loadRes(\"Prefab/\" + name, cc.Prefab, (err, prefab) => {\r\n    //         if (err) {\r\n    //             console.log(err.message || err);\r\n    //             return;\r\n    //         }\r\n    //         let node = cc.instantiate(prefab)\r\n    //         cb && cb(node)\r\n    //         this.showPopWin(node)\r\n    //     });\r\n    // },\r\n    // showPopWin: function (node) {\r\n    //     if (this.node_popwin._children.length > 1) {\r\n    //         this.delay_popwin.push(node)\r\n    //         return\r\n    //     }\r\n    //     if (!this.popwin_mask.active) {\r\n    //         this.popwin_mask.active = true\r\n    //         this.popwin_mask.opacity = 0\r\n    //         this.popwin_mask.runAction(cc.fadeTo(0.3, 180))\r\n    //     }\r\n    //     node.parent = this.node_popwin\r\n    //     node.runAction(cc.sequence([cc.scaleTo(0.1, 1.15), cc.scaleTo(0.1, 1.0)]))\r\n    // },\r\n    // closePopWin: function (node) {\r\n    //     node.runAction(cc.sequence(cc.scaleTo(0.15, 0.0), cc.callFunc(() => {\r\n    //         node.parent = null\r\n    //         if (this.delay_popwin.length) {\r\n    //             let new_node = this.delay_popwin[0]\r\n    //             this.delay_popwin.splice(0, 1)\r\n    //             return this.showPopWin(new_node)\r\n    //         }\r\n    //         if (this.node_popwin._children.length <= 1) {\r\n    //             this.popwin_mask.active = false\r\n    //         }\r\n    //     })))\r\n    // },\r\n});\r\n"]}
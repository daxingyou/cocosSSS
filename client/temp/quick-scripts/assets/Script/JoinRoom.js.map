{"version":3,"sources":["JoinRoom.js"],"names":["cc","Class","extends","Component","properties","node_input","Node","onLoad","input","input_num","i","input_node","input1","input2","input3","input4","input5","input6","onClickClear","clear","onClickNum","e","num","length","push","_children","getChildByName","getComponent","Label","string","room_id","join","onJoinSSSRoom","http","tryJoinRoom","resp","errno","director","loadScene","content","scene","onShowTips","roomId","self","serverType","onEnter","ret","errcode","log","sssNetMgr","connectGameServer","data","uid","mj","user","roomid","sssHttp","sendRequest","onClickClose","father","parent","onClickDel","splice"],"mappings":"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","file":"JoinRoom.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        node_input: cc.Node,\r\n    },\r\n    onLoad: function () {\r\n        this.input = []\r\n        this.input_num = 0\r\n        for (let i = 0; i < 6; i++) {\r\n            this.input_node = [this.input1, this.input2, this.input3, this.input4, this.input5, this.input6]\r\n\r\n        }\r\n    },\r\n    onClickClear: function () {\r\n        this.clear()\r\n    },\r\n    onClickNum: function (e, num) {\r\n        if (this.input.length == 6) {\r\n            return\r\n        }\r\n        this.input.push(num)\r\n        this.node_input._children[this.input.length - 1].getChildByName(\"value\").getComponent(cc.Label).string = num\r\n        if (this.input.length == 6) {\r\n            let room_id = this.input.join(\"\")\r\n            if (this.input[0]== 2 ) {\r\n                this.onJoinSSSRoom(room_id)\r\n            } else {\r\n                http.tryJoinRoom(room_id, (resp) => {\r\n                    if (!resp.errno) {\r\n                        cc.director.loadScene(\"mjgame\");\r\n                    } else {\r\n                        let content = resp.errno == 10080 ? \"房卡余额不足, 加入房间失败\" : resp.errno == 10088 ? \"加入该俱乐部后才能加入该俱乐部房间，\" : resp.errno == 10081 ? \"积分不足，无法加入积分圈房间\" : (\"您输入的房间号\" + room_id + \"不存在, 请重新输入\")\r\n\r\n                        cc.scene.onShowTips(\"OK\", content)\r\n                        this.clear()\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n    onJoinSSSRoom: function (roomId) {\r\n        var self = this;\r\n        var serverType = 'SSS_SERVER_TYPE'\r\n        var onEnter = function (ret) {\r\n            if (ret.errcode !== 0) {\r\n                if(ret.errcode==4){\r\n                    cc.scene.onShowTips(\"OK\", '房间人数已满')\r\n                }\r\n                cc.log(ret)\r\n            }\r\n            else {\r\n                cc.sssNetMgr.connectGameServer(ret);\r\n            }\r\n        };\r\n        var data = {\r\n            uid: cc.mj.user.uid,\r\n            serverType: serverType,\r\n            roomid: roomId,\r\n        };\r\n        cc.sssHttp.sendRequest(\"/enter_private_room\", data, onEnter);\r\n    },\r\n    onClickClose: function () {\r\n        this.father.parent = null\r\n    },\r\n    onClickDel: function () {\r\n        if (this.input.length == 0) {\r\n            return\r\n        }\r\n        this.node_input._children[this.input.length - 1].getChildByName(\"value\").getComponent(cc.Label).string = ''\r\n        this.input.splice(this.input.length - 1, 1)\r\n    },\r\n    clear: function () {\r\n        this.input = []\r\n        for (let i = 0; i < 6; i++) {\r\n            this.node_input._children[i].getChildByName(\"value\").getComponent(cc.Label).string = ''\r\n        }\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    // start () {\r\n\r\n    // },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
{"version":3,"sources":["History.js"],"names":["cc","Class","extends","Component","properties","one_game_prefab","default","type","Prefab","content","Node","onLoad","http","sendTick","method","game","resp","idx","items","histories","Task","runAfter","scene","closePopWin","waiting","showWaiting","node","onShowOtherReplay","showPrefab","update","dt","length","history","instantiate","getComponent","init","parent"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,yBAAiB;AACbC,qBAAS,IADI;AAEbC,kBAAMP,GAAGQ;AAFI,SADT;AAKRC,iBAAS;AACLH,qBAAS,IADJ;AAELC,kBAAMP,GAAGU;AAFJ;AALD,KAHP;AAaLC,YAAQ,kBAAY;AAAA;;AAChBC,aAAKC,QAAL,CAAc,EAAEC,QAAQ,aAAV,EAAwBC,MAAK,CAA7B,EAAd,EAAgD,UAACC,IAAD,EAAU;AACtD,kBAAKC,GAAL,GAAW,CAAX;AACA,kBAAKC,KAAL,GAAaF,KAAKG,SAAlB;AACAC,iBAAKC,QAAL,CAAc,GAAd,EAAmB,YAAM;AAAErB,mBAAGsB,KAAH,CAASC,WAAT,CAAqB,MAAKC,OAA1B;AAAoC,aAA/D;AACH,SAJD;AAKAxB,WAAGsB,KAAH,CAASG,WAAT,CAAqB,UAArB,EAAiC,UAACC,IAAD,EAAU;AACvC,kBAAKF,OAAL,GAAeE,IAAf;AACH,SAFD;AAGH,KAtBI;AAuBLC,uBAAmB,6BAAY;AAC3B3B,WAAGsB,KAAH,CAASM,UAAT,CAAoB,MAApB,EAA4B,IAA5B;AACH,KAzBI;AA0BLC,UA1BK,kBA0BEC,EA1BF,EA0BM;AACP,YAAI,KAAKZ,KAAL,IAAc,KAAKD,GAAL,GAAW,KAAKC,KAAL,CAAWa,MAAxC,EAAgD;AAC5C,gBAAIC,UAAU,KAAKd,KAAL,CAAW,KAAKD,GAAhB,CAAd;AACA,gBAAIS,OAAO1B,GAAGiC,WAAH,CAAe,KAAK5B,eAApB,CAAX;AACAqB,iBAAKQ,YAAL,CAAkB,SAAlB,EAA6BC,IAA7B,CAAkCH,OAAlC,EAA2C,KAAKN,IAAhD;AACAA,iBAAKU,MAAL,GAAc,KAAK3B,OAAnB;AACA,iBAAKQ,GAAL,IAAY,CAAZ;AACH;AACJ;AAlCI,CAAT","file":"History.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        one_game_prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        content: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n    },\r\n    onLoad: function () {\r\n        http.sendTick({ method: \"game.record\",game:0 }, (resp) => {\r\n            this.idx = 0\r\n            this.items = resp.histories\r\n            Task.runAfter(500, () => { cc.scene.closePopWin(this.waiting) })\r\n        })\r\n        cc.scene.showWaiting(\"正在获取比赛记录\", (node) => {\r\n            this.waiting = node\r\n        })\r\n    },\r\n    onShowOtherReplay: function () {\r\n        cc.scene.showPrefab(\"他人回放\", true)\r\n    },\r\n    update(dt) {\r\n        if (this.items && this.idx < this.items.length) {\r\n            let history = this.items[this.idx]\r\n            let node = cc.instantiate(this.one_game_prefab)\r\n            node.getComponent(\"OneGame\").init(history, this.node)\r\n            node.parent = this.content\r\n            this.idx += 1\r\n        }\r\n    },\r\n});\r\n"]}
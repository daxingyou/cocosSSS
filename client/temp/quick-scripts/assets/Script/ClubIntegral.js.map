{"version":3,"sources":["ClubIntegral.js"],"names":["cc","Class","extends","Component","properties","editbox","EditBox","title","Label","usericon","Sprite","nickname","onLoad","init","is_inc","club_id","uid","name","icon","cb","string","placeholder","Utils","UrlImage","err","sprite","spriteFrame","onCommit","value","isNaN","parseInt","Math","max","content","scene","onShowTips","http","sendHall","method","tarid","closePopWin","node"],"mappings":";;;;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC;AACIC,iBAASL,GAAGM,OADhB;AAEIC,eAAOP,GAAGQ,KAFd;AAGIC,kBAAUT,GAAGU,MAHjB;AAIIC,kBAAUX,GAAGQ;AAJjB,gBAKWR,GAAGQ,KALd,CAHK;AAULI,YAAQ,kBAAY,CAEnB,CAZI;AAaLC,UAAM,cAAUC,MAAV,EAAkBC,OAAlB,EAA2BC,GAA3B,EAAgCC,IAAhC,EAAsCC,IAAtC,EAA4CC,EAA5C,EAAgD;AAAA;;AAClD,aAAKL,MAAL,GAAcA,MAAd;AACA,aAAKC,OAAL,GAAeA,OAAf;AACA,aAAKC,GAAL,GAAWA,GAAX;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKN,QAAL,CAAcS,MAAd,GAAuBH,IAAvB;AACA,aAAKZ,OAAL,CAAagB,WAAb,GAA2BP,SAAS,CAAT,GAAa,MAAb,GAAsB,MAAjD;AACA,aAAKP,KAAL,CAAWa,MAAX,GAAoBN,SAAS,CAAT,GAAa,MAAb,GAAsB,MAA1C;AACAQ,cAAMC,QAAN,CAAeL,IAAf,EAAqB,UAACM,GAAD,EAAMC,MAAN,EAAiB;AAClC,aAACD,GAAD,KAAS,MAAKf,QAAL,CAAciB,WAAd,GAA4BD,MAArC;AACH,SAFD;AAGA,aAAKP,IAAL,GAAYA,IAAZ;AACA,aAAKC,EAAL,GAAUA,EAAV;AACH,KA1BI;AA2BLQ,cAAU,oBAAY;AAAA;;AAClB,YAAIC,QAAQC,MAAMC,SAAS,KAAKzB,OAAL,CAAae,MAAtB,CAAN,IAAuC,CAAvC,GAA2CW,KAAKC,GAAL,CAAS,CAAT,EAAYF,SAAS,KAAKzB,OAAL,CAAae,MAAtB,CAAZ,CAAvD;AACA,aAAKf,OAAL,CAAae,MAAb,GAAsBQ,KAAtB;AACA,YAAIK,UAAU,QAAQ,KAAKhB,IAAb,GAAoB,OAApB,GAA8B,KAAKD,GAAnC,IAA0C,KAAKF,MAAL,GAAc,CAAd,GAAkB,UAAlB,GAA+B,UAAzE,IAAuF,KAAKT,OAAL,CAAae,MAAlH;AACApB,WAAGkC,KAAH,CAASC,UAAT,CAAoB,WAApB,EAAiCF,OAAjC,EAA0C,YAAM;AAC5CG,iBAAKC,QAAL,CAAc,EAAEC,QAAQ,oBAAV,EAAgCvB,SAAS,OAAKA,OAA9C,EAAuDwB,OAAO,OAAKvB,GAAnE,EAAwEY,OAAQ,OAAKd,MAAL,GAAc,CAAd,GAAkBc,KAAlB,GAA0B,CAACA,KAA3G,EAAd,EAAmI,YAAM,CAAG,CAA5I;AACA5B,eAAGkC,KAAH,CAASM,WAAT,CAAqB,OAAKC,IAA1B;AACA,mBAAKtB,EAAL,CAAQ,OAAKL,MAAL,GAAc,CAAd,GAAkBc,KAAlB,GAA0B,CAACA,KAAnC;AACH,SAJD,EAIG,IAJH,EAIS,KAAKV,IAJd;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AA3CI,CAAT","file":"ClubIntegral.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        editbox: cc.EditBox,\r\n        title: cc.Label,\r\n        usericon: cc.Sprite,\r\n        nickname: cc.Label,\r\n        title: cc.Label,\r\n    },\r\n    onLoad: function () {\r\n\r\n    },\r\n    init: function (is_inc, club_id, uid, name, icon, cb) {\r\n        this.is_inc = is_inc\r\n        this.club_id = club_id\r\n        this.uid = uid\r\n        this.name = name\r\n        this.nickname.string = name\r\n        this.editbox.placeholder = is_inc > 0 ? \"增加积分\" : \"扣除积分\"\r\n        this.title.string = is_inc > 0 ? \"增加积分\" : \"扣除积分\"\r\n        Utils.UrlImage(icon, (err, sprite) => {\r\n            !err && (this.usericon.spriteFrame = sprite)\r\n        })\r\n        this.icon = icon\r\n        this.cb = cb\r\n    },\r\n    onCommit: function () {\r\n        let value = isNaN(parseInt(this.editbox.string)) ? 1 : Math.max(1, parseInt(this.editbox.string))\r\n        this.editbox.string = value\r\n        let content = \"玩家:\" + this.name + \"\\nID:\" + this.uid + (this.is_inc > 0 ? \"\\n增加积分数:\" : \"\\n扣除积分数:\") + this.editbox.string\r\n        cc.scene.onShowTips(\"OK_CANCEL\", content, () => {\r\n            http.sendHall({ method: \"admin_add_integral\", club_id: this.club_id, tarid: this.uid, value: (this.is_inc > 0 ? value : -value) }, () => { })\r\n            cc.scene.closePopWin(this.node)\r\n            this.cb(this.is_inc > 0 ? value : -value)\r\n        }, null, this.icon)\r\n        // cs.init(content, \"OK_CANCEL\", () => {\r\n        //     http.sendHall({ method: \"admin_add_integral\", club_id: this.club_id, tarid: this.uid, value: (this.is_inc > 0 ? value : -value) }, () => { })\r\n        //     tips.parent = null;\r\n        //     this.close()\r\n        //     this.cb(this.is_inc > 0 ? value : -value)\r\n        // }, () => { tips.parent = null }, this.icon)\r\n        // tips.parent = this.node\r\n    },\r\n});\r\n"]}